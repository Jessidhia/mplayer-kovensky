<?xml version="1.0" encoding="utf-8"?>
<!-- Synced with r24180 -->
<chapter id="video">
<title>Výstupní video zařízení/rozhraní</title>

<sect1 id="mtrr">
<title>Nastavení MTRR</title>

<para>
VELMI doporučujeme skontrolovat, zda jsou MTRR registry
správně nastaveny, jelikož mohou velice zvýšit výkon.
</para>

<para>
Proveďte <command>cat /proc/mtrr</command>:
<screen>
<prompt>--($:~)--</prompt> cat /proc/mtrr
reg00: base=0xe4000000 (3648MB), size=  16MB: write-combining, count=9
reg01: base=0xd8000000 (3456MB), size= 128MB: write-combining, count=1<!--
--></screen>
</para>

<para>
Takto to správně ukazuje má Matrox G400 se 16MB paměti. Provedl jsem to z
XFree 4.x.x, které nastavuje MTRR registry automaticky.
</para>

<para>
Pokud nic nefunguje, budete to muset udělat ručně. Nejprve musíte najít
bázovou adresu. Máte tři možnosti, jak ji zjistit:

<orderedlist>
<listitem><para>
  ze startovacích informací X11, například:
  <screen>
(--) SVGA: PCI: Matrox MGA G400 AGP rev 4, Memory @ 0xd8000000, 0xd4000000
(--) SVGA: Linear framebuffer at 0xD8000000<!--
  --></screen>
</para></listitem>
<listitem><para>
  z <filename>/proc/pci</filename> (použijte příkaz <command>lspci -v</command>
  ):
  <screen>
01:00.0 VGA compatible controller: Matrox Graphics, Inc.: Unknown device 0525
Memory at d8000000 (32-bit, prefetchable)<!--
  --></screen>
</para></listitem>
<listitem><para>
  ze zpráv jaderného modulu mga_vid (použijte <command>dmesg</command>):
  <screen>mga_mem_base = d8000000</screen>
</para></listitem>
</orderedlist>
</para>

<para>
Pak zjistěte velikost paměti. Je to velmi snadné, stačí převést velikost
video RAM do hexadecimální soustavy, nebo použijte následující tabulku:
<informaltable frame="none">
<tgroup cols="2">
<tbody>
  <row><entry>1 MB</entry><entry>0x100000</entry></row>
  <row><entry>2 MB</entry><entry>0x200000</entry></row>
  <row><entry>4 MB</entry><entry>0x400000</entry></row>
  <row><entry>8 MB</entry><entry>0x800000</entry></row>
  <row><entry>16 MB</entry><entry>0x1000000</entry></row>
  <row><entry>32 MB</entry><entry>0x2000000</entry></row>
</tbody>
</tgroup>
</informaltable>
</para>

<para>
Pokud znáte bázovou adresu a velikost paměti, začněme nastavovat MTRR registry!
Například pro výše uvedenou kartu Matrox (<literal>base=0xd8000000</literal>)
s 32MB RAM (<literal>size=0x2000000</literal>) stačí spustit:
<screen>
echo "base=0xd8000000 size=0x2000000 type=write-combining" &gt; /proc/mtrr
</screen>
</para>

<para>
Ne všechny procesory mají MTRR. Například starší CPU K6-2 (okolo 266MHz,
stepping 0) nemají MTRR, ale stepping 12 je mají
(pro ověření spusťte <command>cat /proc/cpuinfo</command>).
</para>
</sect1>


<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->



<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->


<sect1 id="xv">
<title>Xv</title>

<para>
Pod XFree86 4.0.2, nebo novějším, můžete použít hardwarové YUV rutiny karty
pomocí rozšíření XVideo. Přesně toto používá volba
<option>-vo xv</option>. Toto rozhraní také podporuje nastavování
jasu/kontrastu/barevného tónu/atd. (pokud nepoužíváte strarý, pomalý DirectShow
DivX kodek, který to podporuje všude), viz man stránka.
</para>

<para>
Abyste to zprovoznili, ujistěte se o následujícím:

<orderedlist>
<listitem><para>
  Musíte používat XFree86 4.0.2 nebo novější (předchozí verze nemají XVideo)
</para></listitem>
<listitem><para>
  Vaše karta aktuálně podporuje hardwarovou akceleraci (moderní karty ano)
</para></listitem>
<listitem><para>
  X nahrává rozšíření XVideo. Zpráva ve <filename>/var/log/XFree86.0.log</filename>
  vypadá asi takto:
  <programlisting>(II) Loading extension XVideo</programlisting>
  <note><para>
   Takto se nahraje pouze rozšíření pro XFree86. To je v dobré instalaci nahráno
   vždy a neznamená to, že je načtena i podpora XVideo pro
   <emphasis role="bold">kartu</emphasis>!
  </para></note>
</para></listitem>
<listitem><para>
  Vaše karta má podporu Xv pod Linuxem. Abyste si to ověřili, zkuste
  <command>xvinfo</command>, které je součástí distribuce XFree86. Měl by se
  vypsat dlouhý text podobný tomuto:
  <screen>
X-Video Extension version 2.2
screen #0
  Adaptor #0: "Savage Streams Engine"
    number of ports: 1
    port base: 43
    operations supported: PutImage
    supported visuals:
      depth 16, visualID 0x22
      depth 16, visualID 0x23
    number of attributes: 5
(...)
    Number of image formats: 7
      id: 0x32595559 (YUY2)
        guid: 59555932-0000-0010-8000-00aa00389b71
        bits per pixel: 16
        number of planes: 1
        type: YUV (packed)
      id: 0x32315659 (YV12)
        guid: 59563132-0000-0010-8000-00aa00389b71
        bits per pixel: 12
        number of planes: 3
        type: YUV (planar)
(...atd...)<!--
--></screen>
  Musí podporovat pixelové formáty YUY2 packed a YV12 planar, aby byla
  použitelná s <application>MPlayer</application>em.
</para></listitem>
<listitem><para>
  A nakonec si ověřte, jestli byl <application>MPlayer</application> skompilován
  s podporou 'xv'. Proveďte <command>mplayer -vo help | grep xv </command>.
  Pokud byla skompilována podpora 'xv', měl by se objevi řádek podpobný tomuto:
  <screen>  xv      X11/Xv</screen>
</para></listitem>
</orderedlist>
</para>


<sect2 id="tdfx">
<title>Karty 3dfx</title>

<para>
Starší ovladače 3dfx byly známy svými problémy s XVideo akcelerací a
nepodporovaly barevné prostory YUY2 ani YV12. Ověřte, že máte XFree86
verze 4.2.0 nebo vyšší, které pracuje dobře s YV12 a YUY2, zatímco předchozí
verze, včetně 4.1.0, <emphasis role="bold">padá s YV12</emphasis>.
Pokud zažívate podivné situace při používání <option>-vo xv</option>, zkuste SDL
(má rovněž XVideo) a uvidíte, zda to pomůže. Prostudujte si sekci
<link linkend="sdl">SDL</link> pro více informací.
</para>

<para>
<emphasis role="bold">NEBO</emphasis>, zkuste NOVÉ
<option>-vo tdfxfb</option> rozhraní! Viz sekce
<link linkend="tdfxfb">tdfxfb</link>.
</para>
</sect2>


<sect2 id="s3">
<title>Karty S3</title>

<para>
S3 Savage3D by měly fungovat dobře, ale pro Savage4 použijte XFree86 verze 4.0.3
nebo vyšší (v případě problémů s obrazem, zkuste 16bpp). Stejně ajko S3 Virge:
má sice podporu xv, ale karta samotná je velmi pomalá, takže ji raději prodejte.
</para>

<para>
Pro karty S3 Virge nyní existuje nativní framebuffer ovladač podobný
tdfxfb. Nastavte si framebuffer (čili přidejte
"<option>vga=792 video=vesa:mtrr</option>" do příkazového řádku kernelu) a
použijte <option>-vo s3fb</option> (<option>-vf yuy2</option> a
<option>-dr</option> rovněž pomůžou).
</para>

<note><para>
Zatím není jasné, kterým modelům Savage chybí podpora YV12 a konvertují
ovladačem (pomalé). Pokud podezříváte kartu, opatřete si novější ovladač, nebo
slušně požádejte v konferenci MPlayer-users o ovladač s MMX/3DNow!.
</para></note>
</sect2>


<sect2 id="nvidia">
<title>Karty nVidia</title>

<para>
nVidia není vždy pod Linuxem nejlepší volbou... Open-source ovladač
v XFree86 podporuje většinu těchto karet, ale v některých případech musíte
použít binární closed-source ovladač od nVidie, který je k dispozici na
<ulink url="http://www.nvidia.com/object/linux.html">serveru nVidia</ulink>.
Tento ovladač budete potřebovat vždy, pokud zároveň chcete 3D akceleraci.
</para>

<para>
Karty Riva128 nemají podporu XVideo v nVidia ovladači z XFree86 :(
Stěžujte si nVidii.
</para>

<para>
Ačkoli <application>MPlayer</application> obsahuje
<link linkend="vidix">VIDIX</link> ovladač pro většinu nVidia karet, zatím je
ve stavu beta verze a má jisté nedostatky. Více informací naleznete v sekci
<link linkend="vidix-nvidia">nVidia VIDIX</link>.
</para>
</sect2>


<sect2 id="ati">
<title>Karty ATI</title>

<para>
<ulink url="http://gatos.sf.net">Ovladač GATOS</ulink>
(který byste měli použít, pokud nemáte Rage128 nebo Radeon) má zapnutý VSYNC
ve výchozím stavu. To znamená, že rychlost dekódování (!) je synchronizována
s obnovovacím kmitočtem monitoru. Pokud se vám zdá přehrávání pomalé, zkuste
nějak vypnout VSYNC, nebo nastavte obnovovací kmitočet na n*(snímková rychlost
filmu) Hz.
</para>

<para>
Radeon VE - pokud potřebujete X, použijte pro tuto kartu XFree86 4.2.0 nebo
vyšší. Není zde podpora pro TV out. Samozřejmě s
<application>MPlayer</application>em můžete mít s trochou štěstí
<emphasis role="bold">akcelerovaný</emphasis> display s nebo bez
<emphasis role="bold">TV výstupu</emphasis> a nepotřebujete žádné X knihovny.
Přečtěte si sekci <link linkend="vidix">VIDIX</link>.
</para>
</sect2>


<sect2 id="neomagic">
<title>Karty NeoMagic</title>

<para>
Tyto karty lze nalézt v mnoha laptopech. Musíte použít XFree86 4.3.0 nebo
vyšší, nebo použijte
<ulink url="http://www.mplayerhq.hu/MPlayer/contrib/NeoMagic-driver/">ovladače s podporou Xv</ulink>
od Stefana Seyfrieda.
Stačí vybrat ten, který je vhodný pro vaši verzi XFree86.
</para>

<para>
XFree86 4.3.0 obsahuje podporu Xv, avšak Bohdan Horst poslal malý
<ulink url="http://www.mplayerhq.hu/MPlayer/contrib/NeoMagic-driver/neo_driver.patch">patch</ulink>
pro zdrojový kód XFree86, který zrychluje operace s framebufferem (čili XVideo)
až čtyřikrát. Patch byl zařazen do XFree86 CVS a měl by být v další verzi
vydané po 4.3.0.
</para>

<para>
Abyste mohli přehrávat obsah velikosti DVD, změňte svůj XF86Config takto:
<programlisting>
Section "Device"
    [...]
    Driver "neomagic"
    <emphasis>Option "OverlayMem" "829440"</emphasis>
    [...]
EndSection<!--
--></programlisting>
</para>
</sect2>


<sect2 id="trident">
<title>Karty Trident</title>

<para>
Chcete-li používat Xv s kartou Trident, což nepracuje s 4.1.0,
nainstalujte si XFree 4.2.0. 4.2.0 přidává podporu pro celoobrazovkové Xv
pro kartu Cyberblade XP.
</para>

<para>
Alternativně, <application>MPlayer</application> obsahuje
<link linkend="vidix">VIDIX</link> ovladač pro kartu Cyberblade/i1.
</para>
</sect2>


<sect2 id="kyro">
<title>Karty Kyro/PowerVR</title>

<para>
Pokud chcete používat Xv s kartou založenou na čipu Kyro (například Hercules
Prophet 4000XT), měli byste si stáhnout ovladače z
<ulink url="http://www.powervr.com/">PowerVR serveru</ulink>.
</para>
</sect2>


<sect2 id="intel">
<title>Karty Intel</title>

<para>
Tyto karty lze nalézt v mnoha laptopech. Doporučujeme aktuální Xorg.
</para>

<para>
Abyste umožnili přehrávání obsahu velikosti DVD (a větší), změňte svůj XF86Config/xorg.conf takto:
<programlisting>
Section "Device"
    [...]
    Driver "intel"
    <emphasis>Option "LinearAlloc" "6144"</emphasis>
    [...]
EndSection
</programlisting>
Vynechání této volby obvykle vede k chybě jako
<screen>X11 error: BadAlloc (insufficient resources for operation)</screen>
při pokusu použít <option>-vo xv</option>.
</para>
</sect2>
</sect1>

<!-- ********** -->

<sect1 id="dga">
<title>DGA</title>

<formalpara>
<title>PŘEDMLUVA</title>
<para>
Tento dokument se několika slovy snaží vysvětlit co je to DGA a co
výstupní videorozhraní DGA pro <application>MPlayer</application>
udělat může (a co ne).
</para>
</formalpara>

<formalpara>
<title>CO JE DGA</title>
<para>
<acronym>DGA</acronym> je zkratka pro <emphasis>Direct Graphics
Access</emphasis>, což je program pro obejití X servru a
přímou modifikaci paměti framebufferu. Technicky to znamená mapování paměti
framebufferu do paměťového prostoru vašeho procesu.
To kernel umožňuje pouze pokud máte práva superuživatele. Ty dostanete buď
nalogováním se jako <systemitem class="username">root</systemitem>, nebo
nastavením SUID bitu spustitelnému souboru
<application>MPlayer</application>u (<emphasis role="bold">nedoporučujeme
</emphasis>).
</para>
</formalpara>
<para>
Existují dvě verze DGA: DGA1 je používáno XFree 3.x.x a DGA2 bylo
představeno v XFree 4.0.1.
</para>

<para>
DGA1 poskytuje pouze přímý přístup k framebufferu jak byl popsán výše.
Chcete-li přepínat rozlišení videosignálu, musíte se spolehnout na
rozšíření XVidMode.
</para>

<para>
DGA2 zahrnuje vlastnosti rozšíření XVidMode a rovněž umožňuje přepínat
barevnou hloubku zobrazovače. Takže můžete jendoduše provozovat X server
s hloubkou 32 bitů a přepnout na barevnou hloubku 15 bitů a naopak.
</para>

<para>
DGA má ovšem i jisté obtíže. Zdá se, že je nějak závislé na grafickém čipu,
který používáte a na implementaci video ovladače X serveru, který tento čip
obsluhuje. Takže nefunguje na všech systémech...
</para>

<formalpara>
<title>INSTALACE PODPORY DGA PRO MPLAYER</title>

<para>
Nejprve si ověřte, že X nahrávají rozšíření DGA, viz v
<filename>/var/log/XFree86.0.log</filename>:

<programlisting>(II) Loading extension XFree86-DGA</programlisting>

XFree86 4.0.x nebo vyšší je
<emphasis role="bold">vřele doporučován</emphasis>!
Video rozhraní DGA <application>MPlayer</application>u je autodetekováno
<filename>./configure</filename>, nebo jej můžete vynutit pomocí
<option>--enable-dga</option>.
</para>
</formalpara>

<para>
Pokud rozhraní nemůže přepnout do menšího rozlišení, experimentujte s
volbami <option>-vm</option> (pouze s X 3.3.x), <option>-fs</option>,
<option>-bpp</option>, <option>-zoom</option>, abyste nalezli videorežim, do
kterého se video napasuje. Momentálně není žádný převodník :(
</para>

<para>
Staňte se <systemitem class="username">root</systemitem>em. DGA vyžaduje
práva roota, aby mohl přímo zapisovat do video paměti. Pokud jej chcete
provozovat jako uživatel, pak nainstalujte <application>MPlayer</application>
jako SUID root:

<screen>
chown root <replaceable>/usr/local/bin/mplayer</replaceable>
chmod 750 <replaceable>/usr/local/bin/mplayer</replaceable>
chmod +s <replaceable>/usr/local/bin/mplayer</replaceable>
</screen>

A nyní to bude pracovat také pod obyčejným uživatelem.
</para>

<caution>
<title>Bezpečnostní riziko</title>
<para>
Toto je <emphasis role="bold">velké</emphasis> bezpečnostní riziko!
<emphasis role="bold">Nikdy</emphasis> to nedělejte na serveru nebo počítači
ke kterému mohou mít přístup ostatní lidé, jelikož ti mohou získat
superuživatelská práva díky SUID root
<application>MPlayer</application>u.
</para>
</caution>

<para>
Nyní použijte volbu <option>-vo dga</option> a je to! (doufám:)
Také byste měli vyzkoušet, jestli vám pracuje volba
<option>-vo sdl:dga</option>!
Je mnohem rychlejší!
</para>


<formalpara id="dga-modelines">
<title>PŘEPÍNÁNÍ ROZLIŠENÍ</title>

<para>
Rozhraní DGA umožňuje přepínání rozlišení výstupního signálu.
To odstraňuje potřebu (pomalého) softwarového škálování a zároveň
poskytuje obraz na celou obrazovku. Ideálně by se mělo přepnout na přesné
rozlišení (s výjimkou dodržení poměru stran) video dat, ale X
server umožňuje poze přepínání do rozlišení předdefinovaných v
<filename>/etc/X11/XF86Config</filename>
(nebo <filename>/etc/X11/XF86Config-4</filename> pro XFree 4.X.X).
Ty jsou definovány takzvanými "modelines" a závisí na
schopnostech vašeho video hardwaru. X server projíždí tento konfigurační
soubor při startu a zakáže režimy (modelines) nevhodné pro váš hardware.
Povolené videorežimy naleznete v X11 log souboru. Tel lze nalézt zde:
<filename>/var/log/XFree86.0.log</filename>.
</para>
</formalpara>

<para>
Tyto vstupy jsou známy dobrou funkcí na Riva128 čipu, s použitím modulu
ovladače nv.o X serveru.
</para>

<para><programlisting>
Section "Modes"
  Identifier "Modes[0]"
  Modeline "800x600"  40     800 840 968 1056  600 601 605 628
  Modeline "712x600"  35.0   712 740 850 900   400 410 412 425
  Modeline "640x480"  25.175 640 664 760 800   480 491 493 525
  Modeline "400x300"  20     400 416 480 528   300 301 303 314 Doublescan
  Modeline "352x288"  25.10  352 368 416 432   288 296 290 310
  Modeline "352x240"  15.750 352 368 416 432   240 244 246 262 Doublescan
  Modeline "320x240"  12.588 320 336 384 400   240 245 246 262 Doublescan
EndSection
</programlisting></para>


<formalpara>
<title>DGA &amp; MPLAYER</title>
<para>
DGA je v <application>MPlayer</application>u použito na dvou místech: SDL
rozhraní může být nastaveno pro jeho použití (<option>-vo sdl:dga</option>) a
přímé DGA rozhraní (<option>-vo dga</option>). Výše uvedené je platné
pro obě varianty; v následující sekci vysvětlíme jak pracuje DGA rozhraní
<application>MPlayer</application>u.
</para>
</formalpara>


<formalpara>
<title>VLASTNOSTI</title>

<para>
DGA rozhraní je použito zadáním volby <option>-vo dga</option> na příkazovém
řádku. Výchozím chováním je přepnout na rozlišení co nejbižší originálním
rozměrům videa. Zcela záměrně se ignorují volby <option>-vm</option> a
<option>-fs</option> (umožňující přepínání videorežimů a zobrazení na celou
obrazovku) - vždy zkouší pokrýt tak velkou plochu obrazovky, jak je to jen možné
pomocí přepnutí videorežimu, což nás oprostí od využívání dalších CPU cyklů
pro škálování obrazu. Pokud se vám nelíbí režim, který vybere automatika,
můžete ji přinutit pro výběr režimu nejblíže odpovídajícímu rozlišení,
které zadáte pomocí <option>-x</option> a <option>-y</option>.
Při zadání volby <option>-v</option>, vypíše DGA rozhraní, spolu s dalšími
věcmi, seznam všech rozlišení podporovaných vašim aktuálním
<filename>XF86Config</filename> souborem.
Máte-li DGA2, můžete jej rovněž přinutit použít různé barevné hloubky pomocí
volby <option>-bpp</option>. Platné barevné hloubky jsou 15, 16, 24 a 32.
To jestli jsou tyto barevné hloubky nativně podporovány, nebo musí být provedena
(pravděpodobně pomalá) konverze závisí na vašem hardware.
</para>
</formalpara>
<para>
Pokud jste natolik šťastlivci, že máte dostatek volné mimoobrazové paměti,
aby se zde vměstnal celý obrázek, použije DGA rozhraní dvojitou vyrovnávací
paměť, což vám zajistí mnohem plynulejší přehrávání filmů. Rozhraní vás bude
informovat jestli je dvojitý buffer zapnutý nebo ne.
</para>

<para>
Dvojitou vyrovnávací pamětí se rozumí to, že je další snímek vykreslován do
paměti mimo zobrazovanou plochu, zatímco je zobrazován aktuální snímek.
Jakmile je další snímek připraven, grafický čip je informován o pozici v paměti,
kde je nový snímek a jednoduše přesune data k zobrazení odtud.
Mezitím je další buffer v paměti zaplňován novými videodaty.
</para>

<para>
Dvojitá vyrovnávací paměť může být zapnuta volbou
<option>-double</option> a vypnuta volbou
<option>-nodouble</option>. Současná výchozí hodnota je vypnutí dvojité
vyrovnávací paměti. Při použití DGA rozhraní bude display na obrazovce (OSD)
pracovat pouze při zapnuté dvojité vyrovnávací paměti.
Zapnutí dvojité vyrovnávací paměti však může vyústit velkou ztrátou výkonu
(na mé K6-II+ 525 to použije dalších 20% CPU výkonu!) v závislosti na
implementaci DGA pro váš hardware.
</para>


<formalpara>
<title>OTÁZKA RYCHLOSTI</title>

<para>
Obecně by přístup přes DGA framebuffer měl být alespoň tak rychlý jako
použití rozhraní X11 navíc s celoobrazovkovým režimem.
Procentní hodnoty rychlosti vypisované
<application>MPlayer</application>em byste měli brát s rezervou, jelikož
například při použití X11 nezahrnují čas spotřebovaný X serverem pro
vlastní vykreslování. Zavěste terminál na sériovou linku počítače a
spusťte <command>top</command>, abyste viděli co se opravdu děje ve vašem
počítači.
</para>
</formalpara>

<para>
Obecně zrychlení použitím DGA oproti 'běžnému' X11 velmi závisí na vaší
grafické kertě a jak dobře je pro ni optimalizován modul X serveru.
</para>

<para>
Pokud máte pomalý stroj, raději použijte 15 nebo 16 bitovou hloubku, jelikož
vyžaduje pouze poloviční průchodnost paměti oproti 32 bitovému zobrazení.
</para>

<para>
Použití hloubky 24 bitů je dobré i v případě, že vaše karta nativně podporuje
pouze barevnou hloubku 32 bitů, jelikož se přenáší o 25% méně dat oproti
režimu 32/32.
</para>

<para>
Viděl jsem pár AVI souborů přehrávat na Pentiu MMX 266. Procesory AMD K6-2
pracují při 400 MHZ a výše.
</para>


<formalpara>
<title>ZNÁMÉ CHYBY</title>

<para>
Podle některých vývojářů XFree je DGA zvěrstvo. Říkají, abyste je raději
nepoužívali. Jeho implementace není vždy bezproblémová v každém dostupném
ovladači pro XFree.
</para>
</formalpara>

<itemizedlist>
<listitem><para>
  V XFree 4.0.3 je v <filename>nv.o</filename> chyba vedoucí
  k podivným barvám.
</para></listitem>
<listitem><para>
  Ovladač pro ATI vyžaduje více než jedno zpětné přepnutí režimu po skončení
  používání DGA.
</para></listitem>
<listitem><para>
  Některé ovladače selžou při přepnutí do normálního rozlišení (použijte
  <keycombo><keycap>Ctrl</keycap><keycap>Alt</keycap><keycap>Numerické +</keycap></keycombo>
  a
  <keycombo><keycap>Ctrl</keycap><keycap>Alt</keycap><keycap>Numerické -</keycap></keycombo>
  pro ruční přepnutí).
</para></listitem>
<listitem><para>
  Některé ovladače zobrazují divné barvy.
</para></listitem>
<listitem><para>
  Některé ovladače lžou o množství paměti kterou mapují do adresového prostoru
  procesu, takže vo_dga nepoužije dvojitou vyrovnávací paměť (SIS?).
</para></listitem>
<listitem><para>
  Některé ovladače nezvládnou ohlásit dokonce ani jeden platný režim.
  V tom případě rozhraní DGA spadne s hláškou o nesmaslném režimu
  100000x100000 nebo tak.
</para></listitem>
<listitem><para>
  OSD pracuje pouze se zapnutou dvojitou vyrovnávací pamětí (jinak poblikává).
</para></listitem>
</itemizedlist>

</sect1>

<!-- ********** -->

<sect1 id="sdl">
<title>SDL</title>

<para>
<acronym>SDL</acronym> (Simple Directmedia Layer) je zjednodušeně unifikované
video/audio rozhraní. Programy, které ji používají, znají pouze SDL a ne
jaký audio nebo video ovladač SDL aktuálně používá. Například klon DOOMa
může běžet na svgalib, aalib, X, fbdev a dalších. Musíte jen nastavit
(například) video ovladač pomocí proměnné prostředí
<envar>SDL_VIDEODRIVER</envar>. Aspoň teoreticky.
</para>

<para>
V <application>MPlayer</application>u používáme její softwarový škálovač
ovladače X11 pro karty/ovladače, které nepodporují XVideo, dokud nevytvoříme
vlastní (rychlejší, hezčí) softwarový škálovač. Rovněž jsme používali její
výstup na aalib, ale nyní máme vlastní, což je mnohem pohodlnější.
Její DGA režim byl až doposud lepší než náš. Sledujete? :)
</para>

<para>
Rovněž pomáhá s některými chybnými ovladači/kartami, pokud je video roztřesené
(nikoli problém pomalého stroje), nebo se zpožďuje zvuk.
</para>

<para>
SDL video rozhraní podporuje zobrazování titulků pod filmem, v (pokud je) černém
okraji.
</para>
</sect1>

<!-- ********** -->

<sect1 id="svgalib">
<title>SVGAlib</title>

<formalpara>
<title>INSTALACE</title>
<para>
Budete muset nainstalovat svgalib i s development balíčkem, aby
<application>MPlayer</application> vytvořil své SVGAlib rozhraní
(autodetekováno, ale nelze vynutit) a nezapomeňte upravit
<filename>/etc/vga/libvga.config</filename> tak, aby odpovídal vaší kartě a
monitoru.
</para>
</formalpara>

<note><para>
Ujistěte se, že nepoužíváte volbu <option>-fs</option>, jelikož zapíná
použití softwarového škálování, což je pomalé. Pokud jej opravdu potřebujete,
použijte volbu <option>-sws 4</option>, což poskytuje špatnou kvalitu, ale je
o poznání rychlejší.
</para></note>

<formalpara>
<title>PODPORA EGA (4BPP)</title>
<para>
SVGAlib obsahuje EGAlib a <application>MPlayer</application> umí zobrazovat
jakýkoli film v 16 barvách, což je vhodné v následujících konfiguracích:
</para>
</formalpara>

<itemizedlist>
<listitem><para>
  EGA karta s EGA monitorem: 320x200x4bpp, 640x200x4bpp, 640x350x4bpp
</para></listitem>
<listitem><para>
  EGA karta s CGA monitorem: 320x200x4bpp, 640x200x4bpp
</para></listitem>
</itemizedlist>

<para>
Hodnota bpp (bitů na pixel) musí být nastavena na 4 ručně:
<option>-bpp 4</option>
</para>

<para>
Obraz bude nejspíš muset být zmenšený tak, aby se vešel v EGA režimu:
<screen>-vf scale=640:350</screen>
nebo
<screen>-vf scale=320:200</screen>
</para>

<para>
Když potřebujeme rychlou, ale nekvalitní škálovací rutinu:
<screen>-sws 4</screen>
</para>

<para>
Možná bude muset být vypnuta automatická korekce poměru stran:
<screen>-noaspect</screen>
</para>

<note><para>
Podle mých zkušeností lze dosáhnout nejlepší kvality obrazu na
EGA obrazovkách mírným snížením jasu:
<option>-vf eq=-20:0</option>. Na svém počítači jsem rovněž musel snížit
vzorkovací kmitočet zvuku, protože zvuk pří 44kHz byl vadný:
<option>-srate 22050</option>.
</para></note>

<para>
Zapnout OSD a titulky můžete pouze v kombinaci s <option>expand</option>
filtrem, viz man stránka pro přesné parametry.
</para>
</sect1>

<!-- ********** -->

<sect1 id="fbdev">
<title>Výstup na Framebuffer (FBdev)</title>

<para>
Podpora pro cíl FBdev je autodetekována během
<filename>./configure</filename>. Přečtěte si dokumentaci framebufferu ve
zdrojových kódech kernelu (<filename>Documentation/fb/*</filename>) pro více
informací.
</para>

<para>
Pokud vaše karta nepodporuje standard VBE 2.0 (starší ISA/PCI karty, jako
S3 Trio64), pouze VBE 1.2 (nebo straší?): Nuže, stále máte k dispozici VESAfb,
ale budete muset nahrát SciTech Display Doctor (původně UniVBE) před startem
Linuxu. Použijte bootovací disk DOSu nebo tak. A nezapoměňte si zaregistrovat
svůj UniVBE ;))
</para>

<para>
Výstup FBdev přijímá několik dodatečných voleb:
</para>

<variablelist>
<varlistentry>
  <term><option>-fb</option></term>
    <listitem><para>
    nastaví zařízení framebufferu k použití (výchozí: <filename>/dev/fb0</filename>)
    </para></listitem>
</varlistentry>
<varlistentry>
  <term><option>-fbmode</option></term>
    <listitem><para>
    název režimu k použití (podle <filename>/etc/fb.modes</filename>)
    </para></listitem>
</varlistentry>
<varlistentry>
  <term><option>-fbmodeconfig</option></term>
    <listitem><para>
    config soubor režimů (výchozí: <filename>/etc/fb.modes</filename>)
    </para></listitem>
</varlistentry>
<varlistentry>
  <term><option>-monitor-hfreq</option></term>
  <term><option>-monitor-vfreq</option></term>
  <term><option>-monitor-dotclock</option></term>
    <listitem><para>
    <emphasis role="bold">důležité</emphasis> hodnoty, viz
    <filename>example.conf</filename>
    </para></listitem>
</varlistentry>
</variablelist>

<para>
Pokud se chcete přepnout do určitého režimu, pak použijte
<screen>
mplayer -vm -fbmode <replaceable>name_of_mode</replaceable> <replaceable>soubor</replaceable>
</screen>
</para>

<itemizedlist>
<listitem><para>
  <option>-vm</option> samotná zvolí nejpříhodnější režim z
  <filename>/etc/fb.modes</filename>. Může být rovněž použita spolu s volbami
  <option>-x</option> a <option>-y</option>. Volba
  <option>-flip</option> je podporována pouze pokud pixelový formát filmu
  odpovídá pixelovému formátu videorežimu. Věnujte pozornost hodnotě bpp.
  Ovladač fbdev zkusí použít aktuální, nebo pokud zadáte volbu
  <option>-bpp</option>, pak tuto.
  </para></listitem>
<listitem><para>
  Volba <option>-zoom</option> není podporována
  (použijte <option>-vf scale</option>). Nelze použít režimy 8bpp (nebo nižší).
</para></listitem>
<listitem><para>
  Pravděpodobně budete chtít vypnout kursor:
  <screen>echo -e '\033[?25l'</screen>
  nebo
  <screen>setterm -cursor off</screen>
  a spořič obrazovky:
  <screen>setterm -blank 0</screen>
  Pro opětovné zapnutí kursoru:
  <screen>echo -e '\033[?25h'</screen>
  nebo
  <screen>setterm -cursor on</screen>
</para></listitem>
</itemizedlist>

<note><para>
Změna videorežimu FBdev <emphasis>nepracuje</emphasis> ve VESA
framebufferu a nechtějte to po nás, jelikož to není omezení
<application>MPlayer</application>u.
</para></note>
</sect1>

<!-- ********** -->

<sect1 id="mga_vid">
<title>Matrox framebuffer (mga_vid)</title>

<para>
<systemitem>mga_vid</systemitem> je kombinací výstupního video rozhraní a
Linuxového jaderného modulu, který používá Matrox G200/G400/G450/G550 video
scaler/overlay jednotku pro konverzi YUV->RGB barevného prostoru a libovolé
škálování videa.
<systemitem>mga_vid</systemitem> má hardwarovou podporu VSYNC s trojitou
vyrovnávací pamětí. Pracuje jak ve framebuffer konzoli, tak v X, ale pouze
s Linuxem 2.4.x.
</para>

<para>
Chcete-li verzi ovladače pro Linux 2.6.x, podívejte se na
<ulink url="http://attila.kinali.ch/mga/"/>.
</para>

<procedure>
<title>Instalace:</title>
<step><para>
  Pokud jej chcete použít, nejdříve musíte sestavit
  <filename>mga_vid.o</filename>:
  <screen>
cd drivers
make<!--
--></screen>
</para></step>
<step><para>
  Pake spusťte (jako <systemitem class="username">root</systemitem>)
  <screen>make install</screen>
  což by mělo nainstalovat modul a vytvořit pro vás soubor zařízení.
  Ovladač nahrajte pomocí
  <screen>insmod mga_vid.o</screen>
</para></step>
<step><para>
  Měli byste ověřit velikost detekované paměti pomocí příkazu
  <command>dmesg</command>. Pokud je špatná, použijte volbu
  <option>mga_ram_size</option>
  (nejdřív <command>rmmod mga_vid</command>),
  nastavte velikost paměti karty v MB:
  <screen>insmod mga_vid.o mga_ram_size=16</screen>
</para></step>
<step><para>
  Aby se nahrával/odstraňoval automaticky podle potřeby, nejdříve přidejte
  následující řádek na konec <filename>/etc/modules.conf</filename>:

  <programlisting>alias char-major-178 mga_vid</programlisting>
</para></step>
<step><para>
  Teď budete muset (pře)kompilovat <application>MPlayer</application>,
  <command>./configure</command> zdetekuje
  <filename>/dev/mga_vid</filename> a zakompiluje 'mga' rozhraní.
  V <application>MPlayer</application>u se používá pomocí <option>-vo mga</option>
  pokud máte matroxfb konzoli, nebo <option>-vo xmga</option> pod XFree86
  3.x.x nebo 4.x.x.
</para></step>
</procedure>

<para>
Ovladač mga_vid spolupracuje s Xv.
</para>

<para>
Určité informace lze přečíst z <filename>/dev/mga_vid</filename> zařízení,
například pomocí
<screen>cat /dev/mga_vid</screen>
a může do něj být zapsána změna jasu:
<screen>echo "brightness=120" &gt; /dev/mga_vid</screen>
</para>

<para>
Ve stejném adresáři je i testovací aplikace jménem
<command>mga_vid_test</command>. Měla by na obrazovku kreslit obrázky
256x256 bodů, pokud vše pracuje jak má.
</para>

</sect1>

<!-- ********** -->

<sect1 id="tdfxfb" xreflabel="3Dfx YUV support (tdfxfb)">
<title>Podpora 3Dfx YUV</title>

<para>
Tento ovladač používá ovladač framebufferu tdfx z jádra pro přehrávání
filmů s YUV akcelerací. Budete potřebovat jádro s podporou tdfxfb a
rekompilovat s
<screen>./configure --enable-tdfxfb</screen>
</para>
</sect1>

<!-- ********** -->

<sect1 id="tdfx_vid">
<title>tdfx_vid</title>

<para>
Toto je kombinace Linuxového jaderného modulu a video výstupního
rozhraní podobného <link linkend="mga_vid">mga_vid</link>.
Budete potřebovat 2.4.x kernel s <systemitem>agpgart</systemitem>
ovladačem, jelikož <systemitem>tdfx_vid</systemitem> používá AGP.
Předejte <option>--enable-tdfxfb</option> do <command>configure</command>
abyste sestavili video výstupní rozhraní a sestavte jaderný modul pomocí
následujících instrukcí.
</para>

<procedure>
<title>Instalace jaderného modulu tdfx_vid.o:</title>
<step><para>
  Kompilace <filename>tdfx_vid.o</filename>:
  <screen>
cd drivers
make</screen>
</para></step>
<step><para>
  Pak spusťte (jako <systemitem class="username">root</systemitem>)
  <screen>make install</screen>
  což by mělo nainstalovat modul a vytvořit soubor zařízení.
  Nahrajte ovladač pomocí
  <screen>insmod tdfx_vid.o</screen>
</para></step>
<step><para>
  Aby se nahrával a odstraňoval automaticky podle potřeby, vložte nejprve
  následující řádku na konec <filename>/etc/modules.conf</filename>:

  <programlisting>alias char-major-178 tdfx_vid</programlisting>
</para></step>
</procedure>

<para>
Ve stejném adresáři je testovací aplikace jménem
<command>tdfx_vid_test</command>. Měla by vypisovat pár užitečných
informací, pokud vše dobře pracuje.
</para>

</sect1>

<!-- ********** -->

<sect1 id="opengl">
<title>Rozhraní OpenGL</title>

<para>
<application>MPlayer</application> podporuje zobrazování filmů pomocí OpenGL,
ale pokud vaše platforma/ovladač podporuje xv což by měl být případ PC s
Linuxem, použijte raději xv, jelikož výkon OpenGL je o poznání horší.
Pokud máte X11 implementaci bez podpory xv, je OpenGL slušná alternativa.
</para>

<para>
Naneštěstí ne všechny ovladače tuto vlastnost podporují. Ovladače Utah-GLX
(pro XFree86 3.3.6) ji podporují pro všechny karty.
Viz <ulink url="http://utah-glx.sf.net"/> pro detaily jak je nainstalovat.
</para>

<para>
XFree86(DRI) 4.0.3 nebo pozdější podporují OpenGL s kartami Matrox a Radeon,
4.2.0 a pozdější podporují Rage128.
Viz <ulink url="http://dri.sf.net"/> pro stažení a instalační instrukce.
</para>

<para>
Rada od jednoho z uživatelů: GL video výstup lze použít pro dosažení
vertikálně synchronizovaného TV výstupu. Budete muset nastavit proměnnou
prostředí (aspoň na nVidii):
</para>

<para>
<command>export __GL_SYNC_TO_VBLANK=1</command>
</para>
</sect1>

<!-- ********** -->

<sect1 id="aalib">
<title>AAlib &ndash; zobrazování v textovém režimu</title>

<para>
AAlib je knihovna pro zobrazování grafiky v textovém režimu pomocí výkonného
ASCII renderovače. Existuje <emphasis>spousta</emphasis> programů, ktaré ji již
podporují, jako DOOM, Quake, atd. <application>MPlayer</application>
pro ni obsahuje šikovné rozhraní. Pokud <filename>./configure</filename>
zjistí nainstalovanou aalib, sestaví se aalib libvo rozhraní.
</para>

<para>
Můžete použít některé klávesy v AA okně pro změnu renderovacích voleb:
</para>

<informaltable>
<tgroup cols="2">
<thead>
  <row><entry>Klávesa</entry><entry>Akce</entry></row>
</thead>
<tbody>
<row><entry><keycap>1</keycap></entry><entry>
  sníží kontrast
</entry></row>
<row><entry><keycap>2</keycap></entry><entry>
  zvýší kontrast
</entry></row>
<row><entry><keycap>3</keycap></entry><entry>
  sníží jas
</entry></row>
<row><entry><keycap>4</keycap></entry><entry>
  zvýší jas
</entry></row>
<row><entry><keycap>5</keycap></entry><entry>
  vypíná/zapíná rychlé renderování
</entry></row>
<row><entry><keycap>6</keycap></entry><entry>
  nastaví rozhodovací režim (žádný, error distribution, Floyd Steinberg)
</entry></row>
<row><entry><keycap>7</keycap></entry><entry>
  inverze obrazu
</entry></row>
<row><entry><keycap>8</keycap></entry><entry>
  přepíná mezi ovládáním aa a <application>MPlayer</application>u
</entry></row>
</tbody>
</tgroup>
</informaltable>

<variablelist>
<title>Můžete použít následující volby příkazového řádku:</title>
<varlistentry>
  <term><option>-aaosdcolor=<replaceable>V</replaceable></option></term>
  <listitem><para>
    změna barvy OSD
  </para></listitem>
</varlistentry>
<varlistentry>
  <term><option>-aasubcolor=<replaceable>V</replaceable></option></term>
  <listitem><para>
    změna barvy titulků
  </para><para>
    kde <replaceable>V</replaceable> může být:
    <literal>0</literal> (normální),
    <literal>1</literal> (tmavé),
    <literal>2</literal> (tučné),
    <literal>3</literal> (polotučný font),
    <literal>4</literal> (reverz),
    <literal>5</literal> (speciální).
  </para></listitem>
</varlistentry>
</variablelist>

<variablelist>
<title>AAlib samotná poskytuje velké množství voleb. Zde je několik
důležitých:</title>
<varlistentry>
  <term><option>-aadriver</option></term>
  <listitem><para>
    Nastaví doporučený aa ovladač (X11, curses, Linux).
  </para></listitem>
</varlistentry>
<varlistentry>
  <term><option>-aaextended</option></term>
  <listitem><para>
    Použití všech 256 znaků.
  </para></listitem>
</varlistentry>
<varlistentry>
  <term><option>-aaeight</option></term>
  <listitem><para>
    Použití osmibitového ASCII.
  </para></listitem>
</varlistentry>
<varlistentry>
  <term><option>-aahelp</option></term>
  <listitem><para>
    Vypíše všechny aalib volby.
  </para></listitem>
</varlistentry>
</variablelist>

<note><para>
Renderování je velmi náročné na CPU, zvlášť při použití AA-na-X
(aalib na X) a nejméně náročné je na standardní neframebuferované
konzoli. Použijte SVGATextMode pro nastavení velkého textového režimu
a užijte si! (secondary head Hercules cards rock :)) (ale IMHO můžete použít
volbu <option>-vf 1bpp</option> pro grafiku na hgafb:)
</para></note>

<para>
Použijte volbu <option>-framedrop</option>, pokud váš počítač není dostatečně
rychlý pro renderování všech snímků!
</para>

<para>
Při přehrávání na terminálu dosáhnete lepší rychlosti i kvality použitím
ovladače Linux, bez curses (<option>-aadriver linux</option>). Ale pak budete
potřebovat práva k zápisu do
<filename>/dev/vcsa<replaceable>&lt;terminal&gt;</replaceable></filename>!
Aalib to nedetekuje, ale vo_aa zkouší najít nejlepší režim.
Pro více ladících možností viz <ulink url="http://aa-project.sf.net/tune"/>.
</para>
</sect1>

<!-- ********** -->

<sect1 id="caca">
<title>
<systemitem class="library">libcaca</systemitem> &ndash; Barevná ASCII Art knihovna
</title>

<para>
Knihovna <ulink url="http://sam.zoy.org/projects/libcaca/"><systemitem class="library">libcaca</systemitem></ulink>
je grafická knihovna produkující text místo pixelů, takže může fungovat na
starších video kartách a textových terminálech. Není nepodobná známé knihovně
<systemitem class="library">AAlib</systemitem>.
<systemitem class="library">libcaca</systemitem> vyžaduje k činnosti terminál,
takže by měla fungovat na všech Unixových systémech (včetně Mac OS X) pomocí buď
knihovny <systemitem class="library">slang</systemitem> nebo knihovny
<systemitem class="library">ncurses</systemitem>, pod DOSem pomocí knihovny
<systemitem class="library">conio.h</systemitem> a na systémech Windows
pomocí buď <systemitem class="library">slang</systemitem> nebo
<systemitem class="library">ncurses</systemitem> (pomocí emulace Cygwin) nebo
<systemitem class="library">conio.h</systemitem>. Pokud
<filename>./configure</filename>
detekuje <systemitem class="library">libcaca</systemitem>, bude sestaveno
rozhraní caca libvo.
</para>

<itemizedlist>
<title>Odlišnosti od <systemitem class="library">AAlib</systemitem> jsou:</title>
<listitem><para>
   16 dostupných barev pro znakový výstup (256 barev pro pár)
</para></listitem>
<listitem><para>
   rozhodování podle barev v obrázku
</para></listitem>
</itemizedlist>

<itemizedlist>
<title>Ale <systemitem class="library">libcaca</systemitem> má také následující
  omezení:</title>
<listitem><para>
   nemá podpora pro jas, kontrast a gamu
</para></listitem>
</itemizedlist>

<para>
V caca okně můžete použít některé klávesy pro změnu renderovacích volby:
</para>

<informaltable>
<tgroup cols="2">
<thead>
  <row><entry>Klávesa</entry><entry>Akce</entry></row>
</thead>
<tbody>
<row><entry><keycap>d</keycap></entry><entry>
  Přepíná metody rozhodování v <systemitem class="library">libcaca</systemitem>.
</entry></row>
<row><entry><keycap>a</keycap></entry><entry>
  Přepíná vyhlazování v <systemitem class="library">libcaca</systemitem>.
</entry></row>
<row><entry><keycap>b</keycap></entry><entry>
  Přepíná pozadí v <systemitem class="library">libcaca</systemitem>.
</entry></row>
</tbody>
</tgroup>
</informaltable>

<variablelist>
<title><systemitem class="library">libcaca</systemitem> také respektuje některé
   proměnné prostředí:</title>
<varlistentry>
  <term><option>CACA_DRIVER</option></term>
  <listitem><para>
    Nastaví doporučený caca ovladač, jako ncurses, slang, x11.
  </para></listitem>
</varlistentry>
<varlistentry>
  <term><option>CACA_GEOMETRY (pouze X11)</option></term>
  <listitem><para>
    Nastaví počet řad a sloupců. Např. 128x50.
  </para></listitem>
</varlistentry>
<varlistentry>
  <term><option>CACA_FONT (pouze X11)</option></term>
  <listitem><para>
    Nastaví použitý font. Např. fixed, nexus.
  </para></listitem>
</varlistentry>
</variablelist>

<para>
Použijte volbu <option>-framedrop</option>, pokud váš počítač není dost rychlý
pro renderování všech snímků.
</para>

</sect1>

<!-- ********** -->

<sect1 id="vesa">
<title>VESA - výstup do VESA BIOSu</title>

<para>
Tento ovladač byl navržen a představen jako <emphasis role="bold">obecný
ovladač</emphasis> pro jakoukoli video kartu, která má VESA VBE 2.0 kompatibilní
BIOS. Další výhodou tohoto ovladače je, že zkouší vynutit zapnutí výstupu na TV.
<citetitle>VESA BIOS EXTENSION (VBE) Version 3.0 Date: September 16,
1998</citetitle> (Strana 70) uvádí:
</para>

<blockquote>
<formalpara><title>Karty Dual-Controller</title>
<para>
VBE 3.0 podporuje karty s dual-controllerem za předpokladu že, jelikož jsou
typicky oba controllery vybaveny stejným OEM a nastavovány jedinou
BIOS ROM na stejné grafické kartě, je možné skrýt před aplikací přítomnost
dvou controllerů. To omezuje nezávislé použití jednotlivých controllerů,
ale umožňuje aplikacím vydaným před VBE 3.0 pracovat normálně.
VBE funkce 00h (Návrat informací o controlleru) vrací kombinované informace
obou conrollerů, včetně kombinovaného seznamu platných režimů.
Příslušný controller je aktivován jakmile aplikace vybere režim. Všechny
ostatní VBE funkce pak pracují s aktivním controllerem.
</para>
</formalpara>
</blockquote>

<para>
Máte tedy možnost s tímto rozhraním dostat funkční TV výstup.
(Soudím že TV výstup má velmi často samostatnou jednotku, nebo aspoň samostatný
výstup.)
</para>

<itemizedlist spacing="compact">
<title>VÝHODY</title>
<listitem><para>
  Máte šanci sledovat video <emphasis role="bold">dokonce i když Linux nezná
  </emphasis> váš video hardware.
</para></listitem>
<listitem><para>
  Nepotřebujete mít ve svém Linuxu nainstalovány žádné věci související s
  grafikou (jako X11 (alias XFree86), fbdev atd). Toto rozhraní lze provozovat
  z <emphasis role="bold">textového režimu</emphasis>.
</para></listitem>
<listitem><para>
  Máte šanci získat <emphasis role="bold">funkční TV-out</emphasis>.
  (Je to pravda minimálně s kartami ATI).
</para></listitem>
<listitem><para>
  Toto rozhraní volá <function>int 10h</function> handler, takže není
  emulátorem &ndash; volá <emphasis role="bold">skutečné</emphasis> věci
  <emphasis>skutečného</emphasis> BIOSu v <emphasis>reálném režimu</emphasis>
  (ve skutečnosti v režimu vm86).
</para></listitem>
<listitem><para>
  Můžete s ním použít VIDIX, takže dostanete akcelerované video
  <emphasis role="bold">a</emphasis> TV výstup současně!
  (Doporučeno pro karty ATI.)
</para></listitem>
<listitem><para>
  Máte-li VESA VBE 3.0+ a nastavili jste si někde
  <option>monitor-hfreq, monitor-vfreq, monitor-dotclock</option>
  (config soubor nebo příkazový řádek) dostanete nejvyšší možný obnovovací
  kmitočet. (Using General Timing Formula). Abyste této funkce dosáhli, musíte
  nastavit <emphasis role="bold">všechna</emphasis> nastavení monitoru.
</para></listitem>
</itemizedlist>

<itemizedlist spacing="compact">
<title>NEVÝHODY</title>
<listitem><para>
   Pracuje pouze na <emphasis role="bold">systémech x86</emphasis>.
</para></listitem>
<listitem><para>
  Může to použít pouze <systemitem class="username">root</systemitem>.
</para></listitem>
<listitem><para>
  Zatím je dostupné pouze pro <emphasis role="bold">Linux</emphasis>.
</para></listitem>
</itemizedlist>

<important><para>
Nepoužívejte toto rozhraní s <emphasis role="bold">GCC 2.96</emphasis>!
Nefunguje!
</para></important>

<variablelist>
<title>VOLBY PŘÍKAZOVÉHO ŘÁDKU DOSTUPNÉ PRO VESA</title>
<varlistentry>
  <term><option>-vo vesa:<replaceable>volby</replaceable></option></term>
  <listitem><para>
    zatím dostupné: <literal>dga</literal> pro vynucení dga režimu a
    <literal>nodga</literal> pro jeho potlačení. V režimu dga můžete zapnout
    dvojitou vyrovnávací paměť pomocí volby <option>-double</option>.
    Poznámka: Tyto volby můžete vynechat, abyste zapli
    <emphasis role="bold">autodetekci</emphasis> dga režimu.
  </para></listitem>
</varlistentry>
</variablelist>

<itemizedlist spacing="compact">
<title>ZNÁMÉ PROBLÉMY A KLIČKY</title>
<listitem><para>
  Pokud máte nainstalován <emphasis role="bold">NLS</emphasis> font v
  Linuxové konzoli a použijete VESA rozhraní v textovém režimu, pak po
  ukončení <application>MPlayer</application>u budete mít nahrán
  <emphasis role="bold">ROM font</emphasis> místo národního.
  Můžete si opět nahrát národní font například pomocí utility
  <command>setsysfont</command> z distribuce Mandrake/Mandriva.
  (<emphasis role="bold">Tip</emphasis>: Stejná utilita je použita pro
  lokalizaci fbdev).
</para></listitem>
<listitem><para>
  Některé <emphasis role="bold">Linuxové grafické ovladače</emphasis> neobnovují
  aktivní <emphasis role="bold">režim BIOSu</emphasis> v DOSové paměti.
  Takže pokud máte tento problém &ndash; vždy používejte VESA rozhraní pouze v
  <emphasis role="bold">textovém režimu</emphasis>. Jinak bude přesto aktivován
  textový režim (#03) a budete muset restartovat počítač.
</para></listitem>
<listitem><para>
  Často po ukončení VESA rozhraní dostanete
  <emphasis role="bold">černou</emphasis> obrazovku. Chcete-li vrátit obraz do
  původního stavu &ndash; jednoduše se přepněte do jiné konzole (stiskem
  <keycombo><keycap>Alt</keycap><keycap>F&lt;x&gt;</keycap></keycombo>)
  a pak se přepněte zpět stejným způsobem.
</para></listitem>
<listitem><para>
  Chcete-li <emphasis role="bold">funkční TV-out</emphasis>, musíte mít
  připojený TV konektor před startem počítače, jelikož se video BIOS
  inicializuje pouze jednou během POST procedury.
</para></listitem>
</itemizedlist>
</sect1>

<!-- ********** -->

<sect1 id="x11">
<title>X11</title>

<para>
Pokud možno se mu vyhněte. Posílá obraz do X11 (používá rozšíření sdílená paměť)
bez jakékoli hardwarové akcelerace. Podporuje (MMX/3DNow/SSE akcelerované, ale
přesto pomalé) softwarové škálování. Použijte volby <option>-fs -zoom</option>.
Většina karet má hardwarovou podporu škálování, použijte pro ně volbu
<option>-vo xv</option>, nebo <option>-vo xmga</option> pro karty Matrox.
</para>

<para>
Problém je, že většina karet nepodporuje hardwarovou akceleraci na sekundárním
výstupu/TV. V těchto případech uvidíte místo filmu zelenou/modrou obrazovku.
Teď se hodí toto rozhraní, ale potřebujete silný procesor pro použití
softwarového škálování. Nepoužívejte SDL softwarový výstup a škálování, má horší
kvalitu obrazu!
</para>

<para>
Softwarové škálování je velmi pomalé, zkuste raději měnit videorežimy.
Je to jednoduché. Viz <link linkend="dga-modelines">modelines v DGA sekci</link>
a přidejte je do svého <filename>XF86Config</filename>.

<itemizedlist spacing="compact">
<listitem><para>
  Máte-li XFree86 4.x.x: použijte volbu <option>-vm</option>. Ta změní
  rozlišení tak, aby do něj film dobře vešel. Když ne:
</para></listitem>
<listitem><para>
  S XFree86 3.x.x: musíte cyklovat dostupnými rozlišeními pomocí tlačítek
  <keycombo><keycap>Ctrl</keycap><keycap>Alt</keycap><keycap>Numerické  +</keycap></keycombo>
  a
  <keycombo><keycap>Ctrl</keycap><keycap>Alt</keycap><keycap>Numerické  -</keycap></keycombo>
</para></listitem>
</itemizedlist>
</para>

<para>
Pokud nemůžete najír rozlišení, která jste vložili, pročtěte si výstup XFree86.
Některé ovladače nezvládnou nízké bodové kmitočty potřebné pro režimy s nízkým
rozlišením videa.
</para>
</sect1>

<!-- ********** -->

<sect1 id="vidix">
<title>VIDIX</title>

<formalpara><title>PŘEDMLUVA</title>
<para>
<acronym>VIDIX</acronym> je zkratka pro
<emphasis role="bold">VID</emphasis>eo
<emphasis role="bold">I</emphasis>nterface
for *ni<emphasis role="bold">X</emphasis>
(video rozhraní pro *nix).
VIDIX bylo navrženo a představeno jako rozhraní pro rychlé uživatelské ovladače
dosahujících video výkonu jako dosahuje mga_vid na kartách Matrox. Je rovněž
dobře přenositelné.
</para>
</formalpara>

<para>
Toto rozhraní bylo navrženo jako pokus napasovat existující video akcelerující
rozhraní (známé jako mga_vid, rage128_vid, radeon_vid, pm3_vid) do pevného
schéma. Poskytuje vysokoúrovňové rozhraní k čipům známým jako BES
(BackEnd scalers) nebo OV (Video Overlays). Neposkytuje nízkoúrovňové rozhraní
k věcem známým jako grafické servery.
(Nechci konkurovat X11 týmu v přepínání grafických režimů). Čili hlavním cílem
tohoto rozhraní je maximalizace rychlosti přehrávání videa.
</para>

<itemizedlist spacing="compact">
<title>POUŽITÍ</title>
<listitem><para>
  Můžete použít samostatné video rozhraní: <option>-vo xvidix</option>.
  Toto rozhraní bylo vytvořeno jako front end X11 k technologii VIDIX.
  Vyžaduje X server a může pracovat pouze pod X serverem. Poznamenejme, že
  jelikož přímo komunikuje s hardwarem a obchází X ovladač, pixmapy uložené
  v paměti grafické karty můžou být poškozeny. Můžete se tomu vyhnout omezením
  množství video paměti použité X pomocí volby "VideoRam" v XF86Config o 4MB.
  Pokud máte méně než 8MB video ram, můžete místo toho použít volbu
  "XaaNoPixmapCache" v sekci screen.
</para></listitem>
<listitem>
  <para>
  Existuje konzolové VIDIX rozhraní: <option>-vo cvidix</option>.
  To vyžaduje pro většinu karet funkční inicializovaný framebuffer (jinak pouze
  rozhodíte obrazovku) a dosáhnete podobného efektu jako s
  <option>-vo mga</option> nebo <option>-vo fbdev</option>. nVidia karty však
  jsou schopny zobrazit plně grafické video na reálné textové konzoli. Viz
  sekci <link linkend="vidix-nvidia">nvidia_vid</link> pro více informací.
  Abyste se zbavili textu na okrajích a blikajícího kursoru, zkuste něco jako
  </para>

  <screen>setterm -cursor off > /dev/tty9</screen>

  <para>
  (předpokládáme, že <systemitem>tty9</systemitem> není dosud používaná) a pak
  se přepneme do <systemitem>tty9</systemitem>.
  Na druhou stranu volba <option>-colorkey 0</option> by měla poskytnout
  video běžící na "pozadí", zprávná funkce však závisí na funkčnosti colorkey.
  </para>
</listitem>
<listitem><para>
  Můžete použít VIDIXové podzařízení, které bylo zabudováno do několika video
  ovladačů, například: <option>-vo vesa:vidix</option>
  (<emphasis role="bold">pouze Linux</emphasis>) a
  <option>-vo fbdev:vidix</option>.
</para></listitem>
</itemizedlist>

<para>
Nezáleží na tom, které video výstupní rozhraní je použito s
<emphasis role="bold">VIDIX</emphasis>.
</para>

<itemizedlist spacing="compact">
<title>POŽADAVKY</title>
<listitem><para>
  Video karta by měla být v grafickém režimu (vyjma karet nVidia s výstupním
  rozhraním <option>-vo cvidix</option>).
</para></listitem>
<listitem><para>
  Výstupní video rozhraní <application>MPlayer</application>u by mělo znát
  aktivní video režim a být schopno sdělit VIDIXovému podzařízení některé video
  charakteristiky serveru.
</para></listitem>
</itemizedlist>

<formalpara><title>METODY POUŽITÍ</title>
<para>
Když použijete VIDIX jako <emphasis role="bold">subdevice</emphasis>
(<option>-vo vesa:vidix</option>), pak je konfigurace video režimu je provedeno
výstupním video rozhraním (zkrátka <emphasis role="bold">vo_server</emphasis>em).
Takže můžete zadat na příkazovém řádku <application>MPlayer</application>u
stejné volby jako pro vo_server. Návdavkem rozeznává volbu
<option>-double</option> jako globální parametr. (Doporučuji použít tuto volbu
s VIDIX aspoň pro ATI kartu). Stejně jako <option>-vo xvidix</option>, dosud
zná následující volby: <option>-fs -zoom -x -y -double</option>.
</para>
</formalpara>

<para>
Rovněž můžete uvést VIDIXový ovladač jako třetí podvolbu na příkazovém řádku:
<screen>
mplayer -vo xvidix:mga_vid.so -fs -zoom -double <replaceable>soubor.avi</replaceable>
</screen>
nebo
<screen>
mplayer -vo vesa:vidix:radeon_vid.so -fs -zoom -double -bpp 32 <replaceable>soubor.avi</replaceable>
</screen>
Ale je to nebezpečné a neměli byste to dělat. V tomto případě bude zadaný
ovladač vynucen a výsledek je nepředvídatelný (může vám
<emphasis role="bold">zatuhnout</emphasis> počítač). Měli byste to použít
POUZE pokud jste si absolutně jistí, že to bude fungovat a
<application>MPlayer</application> to neudělá automaticky. Řekněte o tom prosím
vývojářům. Správný způsob je použití VIDIX bez argumentů, aby proběhla
autodetekce.
</para>

<para>
Jelikož VIDIX vyžaduje přímý přístup k hardware, můžete jej buď spustit jako
root, nebo nastavit SETUID bit binárce <application>MPlayer</application>u
(<emphasis role="bold">Varování: Toto je bezpečnostní risk!</emphasis>).
Alternativně můžete použít speciální jaderný modul, například:
</para>

<procedure>
<step><para>
  Stáhněte si
  <ulink url="http://www.arava.co.il/matan/svgalib/">vývojovou verzi</ulink>
  svgalib (například 1.9.17), <emphasis role="bold">NEBO</emphasis> si
  stáhněte verzi vytvořenou Alexem speciálně pro použití s
  <application>MPlayer</application>em (ke kompilaci nepotřebuje zdrojový kód
  svgalib) z
  <ulink url="http://www.mplayerhq.hu/MPlayer/contrib/svgalib/svgalib_helper-1.9.17-mplayer.tar.bz2">odtud</ulink>.
</para></step>
<step><para>
  Skompilujte modul v adresáři
  <filename class="directory">svgalib_helper</filename>
  (naleznete ji v <filename class="directory">svgalib-1.9.17/kernel/</filename>,
  pokud jste si stáhli zdrojový kód ze serveru svgalib) a nahrajte (insmod) jej.
</para></step>
<step><para>
  Pro vytvoření potřebných zařízení v adresáři
  <filename class="directory">/dev</filename> proveďte jako root
  <screen>make device</screen> v adresáři
  <filename class="directory">svgalib_helper</filename>.
</para></step>
<step><para>
  Přesuňte adresář <filename class="directory">svgalib_helper</filename> do
  podadresáře <filename class="directory">vidix</filename> zdrojových
  kódů <application>MPlayer</application>u.
</para></step>
<step><para>
 Odkomentujte řádek CFLAGS obsahující text "svgalib_helper"
 v souboru <filename class="directory">vidix/Makefile</filename>.
</para></step>
<step><para>
  Překompilujte.
</para></step>
</procedure>


<sect2 id="vidix-ati">
<title>Karty ATI</title>

<para>
V současnosti je většina ATI karet podporována nativně od Mach64 až po
nejnovější Radeony.
</para>

<para>
Existují dvě skompilované binárky: <filename>radeon_vid</filename> pro Radeony a
<filename>rage128_vid</filename> pro karty Rage 128. Můžete některou vynutit,
 nebo nechat VIDIX rozhraní autodetekovat všechny dostupné ovladače.
</para>
</sect2>


<sect2 id="vidix-mga">
<title>Karty Matrox</title>

<para>
Matrox G200, G400, G450 a G550 jsou hlášeny jako funkční.
</para>

<para>
Ovladač podporuje video ekvalizéry a měl by být téměř tak rychlý jako
<link linkend="mga_vid">Matrox framebuffer</link>
</para>
</sect2>


<sect2 id="vidix-trident">
<title>Karty Trident</title>

<para>
Existuje ovladač pro čipset Trident Cyberblade/i1, který lze nalézt na
motherboardech VIA Epia.
</para>

<para>
Ovladač byl napsán a je udržován
<ulink url="http://www.blackfiveservices.co.uk/EPIAVidix.shtml">Alastairem M. Robinsonem</ulink>
</para>
</sect2>


<sect2 id="vidix-3dlabs">
<title>Karty 3DLabs</title>

<para>
Ačkoli existuje ovladač pro čipy 3DLabs GLINT R3 a Permedia3, nikdo je
netestoval, takže hlášení vítáme.
</para>
</sect2>


<sect2 id="vidix-nvidia">
<title>Karty nVidia</title>
<para>
Unikátní vlastností ovladače nvidia_vid je jeho schopnost zobrazit video na
<emphasis role="bold">jednoduché, čisté, pouze textové konzoli</emphasis>
&ndash; bez framebufferu nebo nějaké X magie. Pro tento účel budete muset
použít video rozhraní <option>cvidix</option>, jak to ukazuje následující
příklad:
<screen>mplayer -vo cvidix <replaceable>příklad.avi</replaceable></screen>
</para>
</sect2>


<sect2 id="vidix-sis">
<title>Karty SiS</title>

<para>
Toto je velmi experimentální kód, stejně jako nvidia_vid.
</para>

<para>
Byl testován na SiS 650/651/740 (nejobvyklejší čipsety použité v SiS
verzích "Shuttle XPC" barebones boxes out there)
</para>

<para>
Hlášení očekávána!
</para>
</sect2>
</sect1>

<!-- ********** -->

<sect1 id="directfb">
<title>DirectFB</title>

<blockquote><para>
„DirectFB je grafická knihovna navržená se zřetelem na vestavěné systémy.
Nabízí maximálně hardwarově akcelerovaný výkon při minimální spotřebě
zdrojů a zatížení.“ &ndash; citováno z <ulink url="http://www.directfb.org"/>
</para></blockquote>

<para>Vlastnosti DirectFB v této sekci vynechám.</para>

<para>

Ačkoli <application>MPlayer</application> není podporován jako „video
provider“ v DirectFB, toto video rozhraní umožní přehrávání videa přes
DirectFB. Bude to samozřejmě akcelerované. Na mém Matroxu G400 byla rychlost
DirectFB stejná jako XVideo.
</para>

<para>
Vždy se snažte používat nejnovější verzi DirectFB. Můžete nastavovat volby pro
DirectFB na příkazovém řádku pomocí volby <option>-dfbopts</option>. Volbu
vrstvy lze provést metodou podzařízení, např.: <option>-vo directfb:2</option>
(výchozí je vrstva -1: autodetekce)
</para>
</sect1>

<!-- ********** -->

<sect1 id="dfbmga">
<title>DirectFB/Matrox (dfbmga)</title>

<para>
Přečtěte si prosím <link linkend="directfb">hlavní DirectFB</link> sekci pro
obecné informace.
</para>

<para>
Toto video výstupní zařízení zapne CRTC2 (na sekundárním výstupu) na kartách
Matrox G400/G450/G550, takže zobrazuje video
<emphasis role="bold">nezávisle</emphasis> na hlavním výstupu.
</para>

<para>
Ville Syrjala's má
<ulink url="http://www.sci.fi/~syrjala/directfb/Matrox_TV-out_README.txt">README</ulink>
a
<ulink url="http://www.sci.fi/~syrjala/directfb/matrox-tv-out-howto">HOWTO</ulink>
na své domácí stránce, kde vysvětluje, jak rozběhnout DirectFB TV výstup na
kartách Matrox.
</para>

<note><para>
První DirectFB verze se kterou se nám to povedlo byla
0.9.17 (je chybová, potřebuje <systemitem>surfacemanager</systemitem>
patch z výše uvedeného URL). Portace CRTC2 kódu do
<link linkend="mga_vid">mga_vid</link> bylo plánováno léta,
<ulink url="../../tech/patches.txt">patche</ulink> vítáme.
</para></note>
</sect1>


<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->


<sect1 id="mpeg_decoders">
<title>MPEG dekodéry</title>

<sect2 id="dvb">
<title>DVB výstup a vstup</title>

<para>
<application>MPlayer</application> podporuje karty s čipsetem Siemens DVB od
výrobců jako Siemens, Technotrend, Galaxis nebo Hauppauge. Poslední DVB
ovladače jsou dostupné na
<ulink url="http://www.linuxtv.org">Linux TV serveru</ulink>.
Pokud chcete provádět softwarové transkódování, měli byste mít aspoň 1GHz CPU.
</para>

<para>
Configure by měl detekovat vaši DVB kartu. Pokud ne, vynuťte detekci pomocí
<screen>./configure --enable-dvb</screen>
Pokud máte ost hlavičky na nestandardním místě, nastavte cestu pomocí
<screen>
./configure --with-extraincdir=<replaceable>zdrojový adresář DVB</replaceable>/ost/include
</screen>
Pak kompilujte a instalujte obvyklým způsobem.</para>

<formalpara><title>POUŽITÍ</title>
<para>
Hardwarové dekódování proudů obsahujících MPEG–1/2 video a/nebo audio lze
provést tímto příkazem:
<screen>
mplayer -ao mpegpes -vo mpegpes <replaceable>soubor.mpg|vob</replaceable>
</screen>
</para>
</formalpara>

<para>
Dekódování jakéhokoli jiného typu video proudu vyžaduje transkódování MPEG–1,
což je pomalé a nemusí stát za to, zvlášť s pomalým počítačem.
Můžete jej dosáhnout příkazem podobným tomuto:
<screen>
mplayer -ao mpegpes -vo mpegpes <replaceable>váš_soubor.ext</replaceable>
mplayer -ao mpegpes -vo mpegpes -vf expand <replaceable>váš_soubor.ext</replaceable>
</screen></para>

<para>
Pamatujte, že DVB karty podporují pouze výšky 288 a 576 pro PAL nebo 240 a 480
pro NTSC. Jiné výšky <emphasis role="bold">musíte</emphasis> přeškálovat
přidáním <option>scale=šířka:výška</option> s šířkou a výškou, které chcete
do volby <option>-vf</option>. DVB karty akceptují různé šířky jako 720, 704,
640, 512, 480, 352 atd, a provádí hardwarově vodorovné škálování,
takže ve většině případů nemusíte vodorovně škálovat.
Pro 512x384 (poměr stran 4:3) MPEG–4 (DivX) zkuste:
<screen>mplayer -ao mpegpes -vo mpegpes -vf scale=512:576</screen>
</para>

<para>
Pokud máte širokoúhlý film a nechcete jej škálovat na plnou výšku, můžete
použít filtr <option>expand=š:v</option> pro přidání černých okrajů. Pro
promítání 640x384 MPEG–4 (DivX), zkuste:
<screen>
mplayer -ao mpegpes -vo mpegpes -vf expand=640:576 <replaceable>soubor.avi</replaceable>
</screen>
</para>

<para>
Pokud je váš procesor příliš slabý pro 720x576 MPEG–4 (DivX), zkuste podškálovat:
<screen>
mplayer -ao mpegpes -vo mpegpes -vf scale=352:576 <replaceable>soubor.avi</replaceable>
</screen>
</para>

<para>Pokud se rychlost nezlepší, zkuste podškálovat i výšku:
<screen>
mplayer -ao mpegpes -vo mpegpes -vf scale=352:288 <replaceable>soubor.avi</replaceable>
</screen>
</para>

<para>
Pro OSD a titulky použijte OSD vlastnost expand filtru. Takže místo
<option>expand=š:v</option> nebo <option>expand=š:v:x:y</option>, použijte
<option>expand=š:v:x:y:1</option> (pátý parametr <option>:1</option>
na konci zapne renderování OSD). Možná byste měli trochu posunout obraz nahoru,
abyste měli větší černý okraj pro titulky. Rovněž byste měli posunout nahoru
titulky, pokud jsou mimo TV obrazovku. Použijte volbu
<option>-subpos &lt;0-100&gt;</option>
pro toto nastavení (<option>-subpos 80</option> je dobrá volba).
</para>

<para>
Chcete-li přehrávat filmy s jinou snímkovou rychlostí než 25 fps na PAL TV, nebo
na pomalém CPU, přidejte volbu <option>-framedrop</option>.
</para>

<para>
Chcete-li zachovat poměr stran MPEG–4 (DivX) souborů a dosáhnout optimálních
škálovacích parametrů (hardwarové horizontální škálování a softwarové vertikální
škálování zatímco zachováte správný poměr stran), použijte filtr dvbscale:
<screen>
pro 4:3 TV: -vf dvbscale,scale=-1:0,expand=-1:576:-1:-1:1
pro 16:9 TV: -vf dvbscale=1024,scale=-1:0,expand=-1:576:-1:-1:1
</screen>
</para>

<formalpara><title>Digitální TV (vstupní DVB modul)</title>
<para>Můžete použít svou DVB kartu pro sledování Digitální TV.</para>
</formalpara>

<para>
Měli byste mít nainstalovány programy <command>scan</command> a
<command>szap/tzap/czap/azap</command>; všechny jsou zařazeny v balíčku
ovladačů.
</para>

<para>
Ověřte si, zda vaše ovladače pracují správně s progamy jako je
<ulink url="http://sf.net/projects/dvbtools/"><command>dvbstream</command></ulink>
(to je základ vstupního DVB modulu).
</para>

<para>
Nyní byste měli skompilovat soubor <filename>~/.mplayer/channels.conf</filename>,
se syntaxí akceptovanou <command>szap/tzap/czap/azap</command>, nebo nechat
<command>scan</command>, aby jej skompiloval.
</para>

<para>
Pokud máte více než jeden typ karty (Např. Satellitar, Terrestrial, Cable a ATSC)
můžete si uložit své channels soubory podle typu jako
<filename>~/.mplayer/channels.conf.sat</filename>,
<filename>~/.mplayer/channels.conf.ter</filename>,
<filename>~/.mplayer/channels.conf.cbl</filename>,
a <filename>~/.mplayer/channels.conf.atsc</filename>,
kdy <application>MPlayer</application> použije tyto soubory spíše než
<filename>~/.mplayer/channels.conf</filename>,
a vy musíte pouze nastavit, kterou kartu použít.
</para>

<para>
Ujistěte se, že máte <emphasis>pouze</emphasis> nekódované
kanály ve svém <filename>channels.conf</filename> souboru, jinak se
<application>MPlayer</application> pokusí přeladit na nejbližší zobrazitelný,
ale to může trvat dlouho, pokud je zde mnoho po sobě jdoucích šifrovaných
kanálů.
</para>

<para>
V polích audio a video můžete použít rozšířenou syntaxi:
<option>...:pid[+pid]:...</option> (maximálně 6 pidů každé);
v tom případě zahrne <application>MPlayer</application> do datového proudu
všechny zadané pidy plus pid 0 (který obsahuje PAT).
Doporučujeme zahrnout do každého řádku PMT pid pro odpovídající kanál
(pokud jej znáte)
Můžete rovněž zadat 8192, to vybere všechny pidy na této frekvenci
a vy pak můžete přepínat programy pomocí TAB.
To může vyžadovat větší šířku pásma, ale laciné karty vždy přenášejí všechny
kanály minimálně do jádra, takže u nich v tom nebude velký rozdíl.
Další možná použití jsou: televideo pid, druhá audio stopa, atd.
</para>

<para>
Pokud <application>MPlayer</application> často protestuje o
<screen>Příliš mnoha video/audio paketech ve vyrovnávací paměti</screen> nebo
pokud si povšimnete rostoucí desynchronizace mezi zvukem a
videem, zkuste použít MPEG–TS demuxer z libavformat přidáním
<option>-demuxer lavf -lavfdopts probesize=128</option>
na příkazovém řádku.
</para>

<para>
Pro zobrazení prvního z kanálů uvedeného v seznamu, spusťte
<screen>mplayer dvb://</screen>
</para>

<para>
Pokud chcete sledovat určitý kanál, například R1, spusťte
<screen>mplayer dvb://<replaceable>R1</replaceable></screen>
</para>

<para>
Pokud máte více než jednu kartu, musíte rovněž uvést číslo karty, na které lze
kanál sledovat (např. 2). Syntyxe je:
<screen>mplayer dvb://<replaceable>2@R1</replaceable></screen>
</para>

<para>
Pro změnu kanálu stiskněte klávesu <keycap>h</keycap> (další) nebo
<keycap>k</keycap> (předchozí), nebo použijte
<link linkend="osdmenu">OSD menu</link>.
</para>

<para>
Pokud váš <filename>~/.mplayer/menu.conf</filename> obsahuje řádek
<literal>&lt;dvbsel&gt;</literal> podobný tomu v ukázkovém souboru
<filename>etc/dvb-menu.conf</filename> (který můžete použít k přepsání
<filename>~/.mplayer/menu.conf</filename>), bude v hlavním menu podseznam,
kde si budete moci zvolit kanál ze svého <filename>channels.conf</filename>.
Může mu případně předcházet menu se seznamem dostupných karet, pokud máte
více než jednu použitelnou <application>MPlayer</application>em.
</para>

<para>
Pokud si chcete uložit program na disk, můžete použít
<screen>
mplayer -dumpfile <replaceable>r1.ts</replaceable> -dumpstream dvb://<replaceable>R1</replaceable>
</screen>
</para>

<para>
Pokud jej chcete zaznamenat v odlišném formátu (reenkódovat jej), spusťte
místo toho příkaz podobný následujícímu:
<screen>
mencoder -o <replaceable>r1.avi</replaceable> -ovc xvid -xvidencopts bitrate=800\
    -oac mp3lame -lameopts cbr:br=128 -pp=ci dvb://<replaceable>R1</replaceable>
</screen>
</para>

<para>
Přečtěte si man stránku pro seznam voleb, které můžete předat vstupnímu
DVB modulu.
</para>

<formalpara><title>BUDOUCNOST</title>
<para>
Máte-li otázky, nebo chcete dostávat oznámení o nových vlastnostech a zapojit
se do diskuse o těchto věcech, připojte se k naší
<ulink url="http://lists.mplayerhq.hu/mailman/listinfo/mplayer-dvb">MPlayer-DVB</ulink>
e-mailové konferenci. Pamatujte prosím, že jazykem konference je angličtina.
</para>
</formalpara>

<para>
V budoucnu můžete očekávat schopnost zobrazovat OSD a titulky pomocí nativní
podpory OSD v DVB kartách, stejně jako plynulejší přehrávání filmů s jinou
snímkovou rychlostí, než 25 fps a transkódování MPEG–2 na MPEG–4 v reálném čase
(částečná dekomprese).
</para>
</sect2>

<!-- ********** -->

<sect2 id="dxr2">
<title>DXR2</title>

<para>
<application>MPlayer</application> podporuje hardwarově akcelerované
přehrávání pomocí karty Creative DXR2.
</para>

<para>
Nejdříve musíte mít správně nainstalované DXR2 ovladače. Ovladače a návod
k jejich instalaci naleznete na stránkách
<ulink url="http://dxr2.sf.net/">DXR2 Resource Center</ulink>.
</para>

<variablelist><title>POUŽITÍ</title>
<varlistentry>
  <term><option>-vo dxr2</option></term>
  <listitem><para>Zapíná TV výstup.</para></listitem>
</varlistentry>

<varlistentry>
  <term><option>-vo dxr2:x11</option> nebo <option>-vo dxr2:xv</option></term>
  <listitem><para>Zapíná Overlay výstup v X11.</para></listitem>
</varlistentry>

<varlistentry>
  <term><option>-dxr2 &lt;volba1:volba2:...&gt;</option></term>
  <listitem><para>
  Tato volba je použita k ovládání DXR2 ovladače.
  </para></listitem>
</varlistentry>
</variablelist>

<para>
Overlay čipset použitý v DXR2 má mizernou kvalitu, ale výchozí nastavení pracuje
vždy. OSD lze použít spolu s overlay (ne na TV) při jeho vykreslení v klíčovací
barvě. S výchozím nastavením klíčovací barvy můžete dosáhnout různých výsledků,
obvykle uvidíte klíčovací barvu kolem znaků nebo jiné srandovní věci. Pokud ale
vhodně upravíte klíčování, můžete dosáhnout použitelných výsledků.
</para>

<para>Prostudujte si prosím man stránku pro dostupné volby.</para>
</sect2>

<!-- ********** -->

<sect2 id="dxr3">
<title>DXR3/Hollywood+</title>

<para>
<application>MPlayer</application> podporuje hardwarově akcelerované
přehrávání videa pomocí karet Creative DXR3 a Sigma Designs Hollywood Plus.
Obě tyto karty používají MPEG dekodér em8300 od Sigma Designs.
</para>

<para>
Nejprve budete potřebovat správně nainstalované DXR3/H+ ovladače verze 0.12.0
nebo pozdější. Ovladače a návod na jejich instalaci naleznete na stránkách
<ulink url="http://dxr3.sf.net/">DXR3 &amp; Hollywood Plus for Linux</ulink>.
<filename>configure</filename> by mělo automaticky detekovat vaši kartu a
kompilace by se měla obejít bez potíží.
</para>

<!-- FIXME: find a more clear presentation -->
<variablelist>
<title>POUŽITÍ</title>
<varlistentry>
<term><option>-vo dxr3:prebuf:sync:norm=x:<replaceable>zařízení</replaceable></option></term>
<listitem><para>
<option>overlay</option> aktivuje overlay místo TVOut. Pro správnou funkci
vyžaduje, abyste měli správně nakonfigurované nastavení overlay. Nejjednodužší
způsob nastavení overlay, je spuštění autocal. Pak spusťte MPlayer s video
výstupem nastaveným na dxr3 s vypnutým overlay, spusťte dxr3view. V dxr3view
si můžete hrát s nastavením overlay a pozorovat změny v reálném čase. Snad bude
tato funkce časem dostupná z GUI <application>MPlayer</application>u. Jakmile
máte správně nastaveno overlay, není již nutné používat dxr3view.
<option>prebuf</option> zapíná prebuffering. Prebuffering je vlastnost čipu
em8300, která mu umožňuje podržet si více než jeden videosnímek současně.
To znamená, že pokud jej máte zapnutý, snaží se
<application>MPlayer</application> udržet vyrovnávací paměť videa (buffer)
naplněný daty.
Pokud jej provozujete na pomalém stroji, použije
<application>MPlayer</application> téměř nebo přesně 100% výkonu CPU.
To je zvlášť časté, pokud přehráváte čisté MPEG datové proudy
(jako DVD, SVCD atp.) jelikož je <application>MPlayer</application> nemusí
převádět do MPEG, naplní buffer velmi rychle.
S prebufferingem je přehrávání videa <emphasis role="bold">mnohem</emphasis>
méně citlivé na zaměstnávání CPU jinými programy. Nebudou zahozeny snímky, pokud
si aplikace neuzme CPU na dlouhou dobu.
Pokud přehráváte bez prebufferingu, je em8300 mnohem citlivější na vytížení CPU,
takže doporučujeme zapnout <application>MPlayer</application>ovu volbu
<option>-framedrop</option> pro zachování synchronizace.
<option>sync</option> zapíná nový sync–engine. To je zatím experimentální
vlastnost. Se zapnutým sync budou vnitřní hodiny em8300 neustále sledovány a
pokud se začnou rozcházet s časovačem <application>MPlayer</application>u,
budou resetovány, což způsobí, že em8300 zahodí veškeré snímky, které čekají ve
frontě.
<option>norm=x</option> nastaví TV normu DXR3 karty bez nutnosti externího
nástroje jako em8300setup. Platné normy jsou 5 = NTSC, 4 = PAL-60,
3 = PAL. Zvláštní normy jsou 2 (automaticné nastavení s použitím PAL/PAL-60) a
1 (automatické nastavení s použitím PAL/NTSC), jelikož ty určí použitou normu
podle snímkové rychlosti filmu. norm = 0 (výchozí) nezmění aktuální normu.
<option><replaceable>device</replaceable></option> = číslo zařízení, které se
má použít, pokud máte více než jednu em8300 kartu.
Jakoukoli z těchto voleb můžete vynechat.
Volba <option>:prebuf:sync</option>, zdá se, pracuje skvěle při přehrávání filmů
v MPEG–4 (DivX). Lidé však hlásili potíže s volbou prebuf při přehrávání souborů
v MPEG–1/2.
Měli byste je nejprve zkusit přehrát bez dodatečných voleb a pokud
narazíte na potíže se synchronizací nebo DVD titulky, zkuste to s volbou
<option>:sync</option>.
</para></listitem>
</varlistentry>

<varlistentry>
  <term><option>-ao oss:/dev/em8300_ma-<replaceable>X</replaceable></option></term>
  <listitem><para>
  Pro zvukový výstup, kde <replaceable>X</replaceable> je číslo zařízení
  (0 máte-li jen jednu kartu).
  </para></listitem>
</varlistentry>

<varlistentry>
  <term><option>-af resample=<replaceable>xxxxx</replaceable></option></term>
  <listitem><para>
  Čip em8300 neumí přehrávat signál vzorkovaný méně než 44100Hz. Pokud je
  vzorkovací kmitočet pod 44100Hz, zvolte buď 44100Hz nebo 48000Hz podle toho,
  násobek kterého je blíž. Čili pokud má film zvuk 22050Hz použijte 44100Hz,
  jelikož 44100 / 2 = 22050, pokud jej má 24000Hz použijte 48000Hz jelikož
  48000 / 2 = 24000 a tak dále.
  S výstupem digitálního audia to nefunguje (<option>-ac hwac3</option>).
  </para></listitem>
</varlistentry>

<varlistentry>
  <term><option>-vf lavc/fame</option></term>
  <listitem><para>
  Pro přehrávání ne–MPEG obsahu na em8300 (např. MPEG–4 (DivX) nebo RealVideo)
  musíte nastavit MPEG–1 video filtr jako
  <systemitem class="library">libavcodec</systemitem> (lavc).
  Viz manuál pro další informace o <option>-vf lavc</option>.
  V tuto chvíli není možné nastavit snímkovou rychlost em8300, což znamená,
  že je pevně nastavena na 30000/1001 snímků/s (fps).
  Z toho důvodu doporučujeme,
  abyste použili <option>-vf lavc=<replaceable>quality</replaceable>:25</option>
  zvlášť pokud používáte prebuffering. Proč tedy 25 a ne 30000/1001? Nu, důvodem
  je, že pokud zadáte 30000/1001, začne obraz trochu poskakovat.
  Důvod tohoto jevu nám není znám.
  Pokud to nastavíte někde mezi 25 a 27, obraz se ustálí.
  Pro tuto chvíli se to dá pouze uznat jako fakt.
  </para></listitem>
</varlistentry>

<varlistentry>
  <term><option>-vf expand=-1:-1:-1:-1:1</option></term>
  <listitem><para>
  Ačkoli DXR3 ovladač umí dodat OSD do MPEG–1/2/4 videa, má to mnohem nižší
  kvalitu než tradiční OSD <application>MPlayer</application>u a má i různé
  problémy s obnovováním. Výše uvedený příkazový řádek nejprve převede vstupní
  video do MPEG–4 (je to nutné, sorry), pak aplikuje filtr expand, který však
  nic neexpanduje (-1: výchozí), ale doplní normální OSD do obrazu
  (na to je ta „1“ na konci).
  </para></listitem>
</varlistentry>

<varlistentry>
  <term><option>-ac hwac3</option></term>
  <listitem><para>
  Čip em8300 podporuje přehrávání zvuku v AC–3 (prostorový zvuk) přes digitální
  audio výstup na kartě. Viz výš volbu <option>-ao oss</option>. Ta musí být
  použita pro nastavení výstupu do DXR3 místo zvukové karty.
  </para></listitem>
</varlistentry>
</variablelist>
</sect2>
</sect1>


<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->


<sect1 id="other">
<title>Ostatní vizualizační hardware</title>

<sect2 id="zr">
<title>Zr</title>

<para>
Toto je zobrazovací rozhraní (<option>-vo zr</option>) pro mnoho MJPEG
zachytávacích/přehrávacích karet (testováno na DC10+ a Buz a mělo by pracovat
i s LML33, tedy DC10). Rozhraní pracuje tak, že snímek zakóduje do JPEG a pak
jej pošle do karty. Pro enkódování do JPEG se používá
<systemitem class="library">libavcodec</systemitem> a je pro ně nezbytný.
Ve speciálním <emphasis>cinerama</emphasis> režimu můžete sledovat filmy
v pravém širokoúhlém formátu, kterého je dosaženo tak, že máte dvě promítačky
a dvě MJPEG karty. V závislosti na rozlišení a nastavení kvality může toto
rozhraní vyžadovat spoustu výkonu CPU. Nezapomeňte zadat
<option>-framedrop</option>, pokud je váš počítač příliš pomalý.
Poznámka: Můj AMD K6-2 350MHz je (s <option>-framedrop</option>) vcelku
adekvátní pro sledování materiálu o rozměru VCD a podškálovaných filmů.
</para>

<para>
Toto rozhraní komunikuje s jaderným modulem dostupným na
<ulink url="http://mjpeg.sf.net"/>, takže jej nejdříve musíte zprovoznit.
Přítomnost MJPEG karty je autodetekována skriptem
<filename>configure</filename>. Pokud detekce selže, vynuťte ji pomocí
<screen>./configure --enable-zr</screen>
</para>

<para>
Výstup může být ovlivňován několika volbami. Obšírný výklad těchto voleb
naleznete v man stránce, krátký přehled obržíte spuštěním
<screen>mplayer -zrhelp</screen>
</para>

<para>
Věci jako škálování a OSD (display na obrazovce) nejsou tímto rozhraním pokryty,
ale lze jich dosáhnout pomocí video filtrů. Například mějte video o rozlišení
512x272 a chcete jej přehrávat na celé obrazovce přes DC10+, pak máte tři
základní možnosti, jak to udělat. Můžete škálovat video na šířku 768, 384 nebo
192. Z důvodu výkonu a kvality si zvolíte škálování filmu na 384x204 pomocí
bilineárního softwarového škálovače. Příkazový řádek je pak
<screen>
mplayer -vo zr -sws 0 -vf scale=384:204 <replaceable>film.avi</replaceable>
</screen>
</para>

<para>
Ořezání lze provést <option>crop</option> filtrem a samotným rozhraním.
Řekněme, že film je příliš široký pro promítání na vaší Buz a proto chcete
použít <option>-zrcrop</option> pro zůžení filmu, pak byste měli použít
následující příkaz
<screen>
mplayer -vo zr -zrcrop 720x320+80+0 <replaceable>benhur.avi</replaceable>
</screen>
</para>

<para>
chcete-li použít filtr <option>crop</option>, proveďte
<screen>
mplayer -vo zr -vf crop=720:320:80:0 <replaceable>benhur.avi</replaceable>
</screen>
</para>

<para>
Zvláštní případy <option>-zrcrop</option> vyvolá režim
<emphasis>cinerama</emphasis>, takže rozprostřete film na několik televizí nebo
promítaček, čímž se vytvoří větší obraz. Předpokládejme, že máte dvě promítačky.
Levá je připojena k vaší Buz na <filename>/dev/video1</filename> a
pravý je připojen do vaší DC10+ na <filename>/dev/video0</filename>.
Film má rozlišení 704x288. Předpokládejme rovněž, že pravá promítačka je
černobílá a levá umí JPEG snímky s kvalitou 10, pak byste měli použít
následující příkaz
<screen>
mplayer -vo zr -zrdev /dev/video0 -zrcrop 352x288+352+0 -zrxdoff 0 -zrbw \
    -zrcrop 352x288+0+0 -zrdev /dev/video1 -zrquality 10 \
        <replaceable>movie.avi</replaceable>
</screen>
</para>

<para>
Jak vidíte, volby uvedené před druhým <option>-zrcrop</option> jsou předány
pouze do DC10+ a volby za druhým <option>-zrcrop</option> do Buz.
Maximální počet MJPEG karet zahrnutých do <emphasis>cinerama</emphasis>
režimu jsou čtyři, takže můžete sestavit zobrazovací stěnu 2x2.
</para>

<para>
Nakonec důležité upozornění: Nespouštějte ani nezastavujte XawTV na přehrávacím
zařízení během přehrávání, zhavaru je vám počítač. Můžete však
<emphasis role="bold">NEJDŘÍV</emphasis> spustit XawTV a
<emphasis role="bold">PAK</emphasis> spustit <application>MPlayer</application>,
počkat až <application>MPlayer</application> skončí a
<emphasis role="bold">PAK</emphasis> zastavit XawTV.
</para>
</sect2>

<!-- ********** -->

<sect2 id="blinkenlights">
<title>Blinkenlights</title>

<para>
Toto rozhraní je schopno přehrávání pomocí Blinkenlights UDP protokolu. Pokud
nevíte co je <ulink url="http://www.blinkenlights.de/">Blinkenlights</ulink>
nebo jeho nástupce
<ulink url="http://www.blinkenlights.de/arcade/">Arcade</ulink>,
zjistěte si to. Ačkoli je to dost možná nejméně používané video výstupní
rozhraní, bezpochyby je tím nejlepším, co může <application>MPlayer</application>
nabídnout. Stačí shlédnout některá z
<ulink url="http://www.blinkenlights.de/video.en.html">Blinkenlights dokumentačních videí</ulink>.
Na Arcade video můžete vidět výstupní rozhraní Blinkenlights v akci v 00:07:50.
</para>
</sect2>
</sect1>


<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->


<sect1 id="tvout">
<title>Podpora TV výstupu</title>

<sect2 id="tvout-mga-g400">
<title>Karty Matrox G400</title>

<para>
Pod Linuxem máte dva způsoby jak zprovoznit TV výstup na G400:
</para>

<important>
<para>
pro instrukce k TV výstupu na Matrox G450/G550 si prostudujte textovou část!
</para>
</important>

<variablelist>
<varlistentry>
  <term>XFree86</term>
  <listitem>
    <para>
    Pomocí ovladače a HAL modulu dostupného na stránkách <ulink
    url="http://www.matrox.com">Matrox</ulink>. Takto dostanete X na TV.
    </para>
    <para>
    <emphasis role="bold">Tato metoda vám neposkytne akcelerované přehrávání</emphasis>
    jako pod Windows! Sekundární jednotka má pouze YUV framebuffer, <emphasis>BES</emphasis>
    (Back End Scaler, YUV škálovač na kartách G200/G400/G450/G550) na něm
    nepracuje! Ovladač pro Windows to nějak obchází, pravděpodobně použitím
    3D jednotky pro zoom a YUV framebufferu pro zobrazení zoomovaného
    obrazu. Pokud opravdu chcete použít X, použijte volby <option>-vo x11 -fs
    -zoom</option>, ale bude to <emphasis role="bold">POMALÉ</emphasis> a
    bude zapnuta ochrana proti kopírování
    <emphasis role="bold">Macrovision</emphasis>
    (Macrovision můžete obejít pomocí tohoto
    <ulink url="http://avifile.sf.net/mgamacro.pl">perlového skriptu</ulink>).
    </para>
  </listitem>
</varlistentry>
<varlistentry>
  <term>Framebuffer</term>
  <listitem>
    <para>
    Pomocí <emphasis role="bold">matroxfb modulů</emphasis> v jádrech řady 2.4.
    Jádra 2.2 v nich neobsahují podporu pro TV, takže jsou pro tento účel
    nepoužitelná. Měli byste povolit VŠECHNY matroxfb-specifické vlastnosti
    během kompilace (vyjma MultiHead) a zakompilovat je do
    <emphasis role="bold">modulů</emphasis>!
    Rovněž potřebujete zapnuté I2C.
    </para>

    <procedure>
    <step><para>
      Vstupte do <filename class="directory">TVout</filename> a zadejte
      <command>./compile.sh</command>. Nainstalujte
      <filename>TVout/matroxset/matroxset</filename>
      někde do cesty <envar>PATH</envar>.
    </para></step>
    <step><para>
      Nemáte-li nainstalován <command>fbset</command>, vložte
      <filename>TVout/fbset/fbset</filename>
      někde do cesty <envar>PATH</envar>.
    </para></step>
    <step><para>
      Nemáte-li nainstalován <command>con2fb</command>, vložte
      <filename>TVout/con2fb/con2fb</filename>
      někde do cesty <envar>PATH</envar>.
    </para></step>
    <step><para>
      Pak vstupte do adresáře <filename class="directory">TVout/</filename>
      ve zdrojovém adresáři <application>MPlayer</application>u a spusťte
      <filename>./modules</filename> jako root. Vaše textová konzole přejde
      do režimu framebuffer (není cesta zpět!).
    </para></step>
    <step><para>
      Dále EDITUJTE a spusťte skript <filename>./matroxtv</filename>. Objeví se
      vám velmi jednoduché menu. Stiskněte <keycap>2</keycap> a
      <keycap>Enter</keycap>. Nyní byste měli mít stejný obraz na svém monitoru
      i TV. Pokud má obraz na TV (výchozí je PAL) nějaké podivné šrámy, nebyl
      skript schopen nastavit správně rozlišení (na výchozích 640x512).
      Zkuste jiná rozlišení z menu a/nebo experimentujte s fbset.
    </para></step>
    <step><para>
      Jo. Dalším úkolem je nechat zmizet kurzor z tty1 (nebo odjinud) a
      vypnout mazání obrazovky. Spusťe následující příkazy:

      <screen>
echo -e '\033[?25l'
setterm -blank 0<!--
   --></screen>
      nebo
      <screen>
setterm -cursor off
setterm -blank 0<!--
   --></screen>

      Předchozí nejspíš bude lepší umístit do skriptu a také vyčistit obrazovku.
      Pro zpětné zapnutí kurzoru:
      <screen>echo -e '\033[?25h'</screen> nebo
      <screen>setterm -cursor on</screen>
    </para></step>
    <step><para>
      A jasně. Spusťte přehrávání filmu:
      <screen>
mplayer -vo mga -fs -screenw 640 -screenh 512 <replaceable>soubor</replaceable><!--
   --></screen>

      (Pokud používáte X, přepněte se nyní do matroxfb pomocí například

<keycombo><keycap>Ctrl</keycap><keycap>Alt</keycap><keycap>F1</keycap></keycombo>.)
      Změňte <literal>640</literal> a <literal>512</literal> pokud máte
      nastaveno jiné rozlišení...
    </para></step>
    <step><para>
      <emphasis role="bold">Užijte si ultra-rychlý ultra-vybavený Matrox TV
      výstup (lepší než Xv)!</emphasis>
    </para></step>
    </procedure>
  </listitem>
</varlistentry>
</variablelist>

<formalpara><title>Výroba kabelu pro Matrox TV–out</title>
<para>
Zříkáme se jakékoli odpovědnosti nebo záruky za jakékoli poškození způsobené
touto dokumentací.
</para>
</formalpara>

<formalpara><title>Kabel pro G400</title>
<para>
Na čtvrtém pinu CRTC2 konektoru je kompozitní video signál. Zem je
na šestém, sedmém a osmém pinu. (informaci poskytl
Balázs Rácz)
</para>
</formalpara>

<formalpara><title>Kabel pro G450</title>
<para>
Kompozitní video signál je na pinu jedna. Zem je na pátém,
šestém, sedmém a patnáctém (5, 6, 7, 15) pinu.
(informaci poskytl Balázs Kerekes)
</para>
</formalpara>
</sect2>

<!-- ********** -->

<sect2 id="tv-out_matrox_g450">
<title>Karty Matrox G450/G550</title>

<para>
Podpora TV výstupu pro tyto karty byla přidána teprve nedávno a dosud není
v ostré verzi jádra.
V současnosti nelze (aspoň pokud vím) použít modul
<emphasis role="bold">mga_vid</emphasis>, protože ovladač G450/G550 pracuje
pouze v jedné konfiguraci: první CRTC čip (s mnohem více schopnostmi) na první
displej a druhá CRTC (žádné <emphasis role="bold">BES</emphasis> &ndash; pro
popis BES viz sekci G400 výše) na TV. Takže v současnosti můžete použít pouze
<application>MPlayer</application>ovo <emphasis>fbdev</emphasis> výstupní
rozhraní.
</para>

<para>
První CRTC nemůže být v současnosti přesměrována na sekundární výstup. Autor
jaderného ovladače matroxfb &ndash; Petr Vandrovec &ndash; pro to snad
vyrobí podporu pomocí zobrazení výstupu prvního CRTC na oba výstupy najednou,
což se pro tuto chvíli doporučuje pro G400, viz předchozí sekce.
</para>

<para>
Potřebnou záplatu jádra a podrobné HOWTO lze stáhnout z
<ulink url="http://www.bglug.ca/matrox_tvout/"/>
</para>
</sect2>

<!-- ********** -->

<sect2 id="tvout-ati">
<title>Karty ATI</title>

<formalpara><title>ÚVOD</title>
<para>
V současnosti nechce ATI podporovat žádný ze svých TV-out čipů pod Linuxem
z důvodu jejich licencované technologii Macrovision.
</para>
</formalpara>

<itemizedlist>
<title>STATUS TV VÝSTUPU NA KARTÁCH ATI POD LINUXEM</title>
<listitem><para>
  <emphasis role="bold">ATI Mach64</emphasis>:
  podporovaný <ulink url="http://gatos.sf.net">GATOS</ulink>em.
</para></listitem>
<listitem><para>
  <emphasis role="bold">ASIC Radeon VIVO</emphasis>:
  podporovaný <ulink url="http://gatos.sf.net">GATOS</ulink>em.
</para></listitem>
<listitem><para>
  <emphasis role="bold">Radeon</emphasis> a <emphasis role="bold">Rage128</emphasis>:
  podporovaný <application>MPlayer</application>em!
  Podívejte se na sekce <link linkend="vesa">VESA</link> a
  <link linkend="vidix">VIDIX</link>.
</para></listitem>
<listitem><para>
  <emphasis role="bold">Rage Mobility P/M, Radeon, Rage 128, Mobility M3/M4</emphasis>:
  podporovaný <ulink url="http://www.stud.uni-hamburg.de/users/lennart/projects/atitvout/">atitvout</ulink>em.
</para></listitem>
</itemizedlist>

<para>
Ne ostatních kartách prostě použijte rozhraní <link linkend="vesa">VESA</link>
bez VIDIX. Vyžaduje to výkoný CPU.
</para>

<para>
Jediné co musíte, je <emphasis role="bold">mít TV konektor zapojený
před zapnutím PC</emphasis> jelikož video BIOS se inicializuje pouze
jednou během POST procedury.
</para>
</sect2>

<!-- ********** -->

<sect2 id="tvout-nvidia">
<title>nVidia</title>

<para>
Nejprve si MUSÍTE stáhnout closed–source ovladače z
<ulink url="http://nvidia.com"/>.
Nebudu zde popisovat instalaci a konfiguraci, jelikož je to mimo rámec této
dokumentace.
</para>

<para>
Jakmile je funkční XFree86, XVideo a 3D akcelerace, editujte sekci
Device v souboru <filename>XF86Config</filename>, podle
následujícího příkladu (upravte si to pro svou kartu/TV):

<programlisting>
Section "Device"
        Identifier      "GeForce"
        VendorName      "ASUS"
        BoardName       "nVidia GeForce2/MX 400"
        Driver          "nvidia"
        #Option         "NvAGP" "1"
        Option          "NoLogo"
        Option          "CursorShadow"  "on"

        Option          "TwinView"
        Option          "TwinViewOrientation" "Clone"
        Option          "MetaModes" "1024x768,640x480"
        Option          "ConnectedMonitor" "CRT, TV"
        Option          "TVStandard" "PAL-B"
        Option          "TVOutFormat" "Composite"
EndSection
</programlisting>
</para>

<para>
Samozřejmě je nejdůležitější část TwinView.
</para>
</sect2>

<!-- ********** -->

<sect2 id="tvout-neomagic">
<title>NeoMagic</title>

<para>
Čip NeoMagic lze nalézt v různých laptopech. Některé z nich jsou vybaveny
jednoduchým analogovým TV enkodérem, některé jej mají mnohem pokročilejší.
<itemizedlist>
<listitem><para>
  <emphasis role="bold">Analogový enkodér</emphasis>:
  Bylo nám hlášeno, že použitelný TV lze dosáhnout použitím
  <option>-vo fbdev</option> nebo <option>-vo fbdev2</option>.
  Musíte mít v jádře podporu vesafb a dopsat do příkazového řádku jádra
  následující parametry:
  <option>append="video=vesafb:ywrap,mtrr" vga=791</option>.
  Měli byste nastartovat <application>X</application>, pak se přepnout do
  terminálového režimu např. pomocí
  <keycombo><keycap>Ctrl</keycap><keycap>Alt</keycap><keycap>F1</keycap></keycombo>.
  Pokud se vám nepodaří nastartovat <application>X</application> před spuštěním
  <application>MPlayer</application>u z konzole, bude video pomalé a trhané
  (vysvětlení uvítáme).
  Nalogujte se do konzole a zadejte následující příkaz:

  <screen>clear; mplayer -vo fbdev -zoom -cache 8192 dvd://</screen>

  Video by nyní mělo běžet v konzoli a vyplňovat asi polovinu LCD obrazovky
  laptopu. Pro přepnutí na TV stiskněte
  <keycombo><keycap>Fn</keycap><keycap>F5</keycap></keycombo> třikrát.
  Testováno na Tecra 8000, 2.6.15 jádro s vesafb, ALSA v1.0.10.
</para></listitem>
<listitem>
  <para>
  <emphasis role="bold">Chrontel 70xx enkodér</emphasis>:
  Nalezen v  IBM Thinkpad 390E a bude pravděpodobně i ostatních Thinkpadech nebo
  noteboocích.
  </para><para>
  Musíte použít <option>-vo vesa:neotv_pal</option> pro PAL nebo
  <option>-vo vesa:neotv_ntsc</option> pro NTSC.
  To vám zpřístupní funkci TV výstupu v následujících 16 bpp a 8 bpp režimech:
  </para>
  <itemizedlist>
    <listitem><para>NTSC 320x240, 640x480 a možná také 800x600.</para></listitem>
    <listitem><para>PAL  320x240, 400x300, 640x480, 800x600.</para></listitem>
  </itemizedlist>
  <para>Režim 512x384 není podporován BIOSem. Musíte obraz škálovat do
  jiného rozlišení pro aktivaci TV výstupu. Pokud vidíte obraz na obrazovce
  v 640x480 nebo v 800x600, ale ne v 320x240 nebo jiném menším rozlišení,
  musíte nahradit dvě tabulky ve <filename>vbelib.c</filename>.
  Viz funkci vbeSetTV pro více informací. V tomto případě prosím kontaktujte
  autora.
  </para>
  <para>
  Známá omezení: pouze VESA, žádné další ovládací prvky jako jas, kontrast,
  úroveň černé, filtrace blikání nejsou implementovány.
  </para>
</listitem>
</itemizedlist>
</para>
</sect2>
</sect1>

</chapter>
