<?xml version="1.0" encoding="utf-8"?>
<!-- synced with r25146 -->
<chapter id="usage">
<title>Использование</title>

<sect1 id="commandline">
<title>Командная строка</title>

<para>
<application>MPlayer</application> использует составное дерево воспроизведения.
Опции, указанные в командной строке, могут применяться ко всем файлам/URL или
только к некоторым, в зависимости от местоположения. Например
<screen>mplayer -vfm ffmpeg movie1.avi movie2.avi</screen>,
будет использовать FFmpeg декодеры для каждого из двух файлов, а
<screen>
mplayer -vfm ffmpeg <replaceable>movie1.avi</replaceable> <replaceable>movie2.avi</replaceable> -vfm dmo
</screen>
будет воспроизводить второй файл, используя DMO декодер.
</para>

<para>
Вы можете группировать файлы/URL'ы вместе, используя <literal>{</literal> и
<literal>}</literal>. Это полезно, например, с опцией <option>-loop</option>:
<screen>mplayer { 1.avi -loop 2 2.avi } -loop 3</screen>
Эта команда проиграет файлы в таком порядке: 1, 1, 2, 1, 1, 2, 1, 1, 2.
</para>

<para>
Воспроизведение файла:
<synopsis>
<command>mplayer</command><!--
--> [<replaceable>опции</replaceable>]<!--
--> [<replaceable>путь</replaceable>/]<replaceable>имя_файла</replaceable>
</synopsis>
</para>

<para>
Другой способ:
<synopsis>
<command>mplayer</command><!--
--> [<replaceable>опции</replaceable>]<!--
--> <replaceable>file:///uri-escaped-path</replaceable>
</synopsis>
</para>

<para>
Воспроизведение множества файлов:
<synopsis>
<command>mplayer</command><!--
--> [<replaceable>общие опции</replaceable>]<!--
--> [<replaceable>путь</replaceable>/]<replaceable>имя_файла1</replaceable><!--
--> [<replaceable>опции для имя_файла1</replaceable>]<!--
--> <replaceable>имя_файла2</replaceable><!--
--> [<replaceable>опции для имя_файла2</replaceable>] ...
</synopsis>
</para>

<para>
Воспроизведение VCD:
<synopsis>
<command>mplayer</command> [<replaceable>опции</replaceable>]<!--
--> vcd://<replaceable>номер_дорожки</replaceable><!--
--> [-cdrom-device <replaceable>/dev/cdrom</replaceable>]
</synopsis>
</para>

<para>
Воспроизведение DVD:
<synopsis>
<command>mplayer</command> [<replaceable>опции</replaceable>]<!--
--> dvd://<replaceable>номер_ролика</replaceable><!--
--> [-dvd-device <replaceable>/dev/dvd</replaceable>]
</synopsis>
</para>

<para>
Воспроизведение из WWW:
<synopsis>
<command>mplayer</command> [<replaceable>опции</replaceable>]<!--
--> http://<replaceable>site.com/file.asf</replaceable>
</synopsis>
(так же можно использовать и списки проигрывания (плейлист[playlist]) )
</para>

<para>
Воспроизведение по RTSP:
<synopsis>
<command>mplayer</command> [<replaceable>опции</replaceable>]<!--
--> rtsp://<replaceable>server.example.com/streamName</replaceable>
</synopsis>
</para>

<para>
Примеры:
<screen>
mplayer -vo x11 <replaceable>/mnt/Films/Contact/contact2.mpg</replaceable>
mplayer vcd://<replaceable>2</replaceable> -cdrom-device <replaceable>/dev/hdc</replaceable>
mplayer -afm 3 <replaceable>/mnt/DVDtrailers/alien4.vob</replaceable>
mplayer dvd://<replaceable>1</replaceable> -dvd-device <replaceable>/dev/hdc</replaceable>
mplayer -abs 65536 -delay -0.4 -nobps <replaceable>~/movies/test.avi</replaceable><!--
--></screen>
</para>
</sect1>


<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->


<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->


<sect1 id="subosd">
<title>Субтитры и OSD</title>

<para>
Вместе с фильмом <application>MPlayer</application> может показывать и субтитры. В настоящий момент
поддерживаются следующие форматы:
<itemizedlist>
  <listitem><para>VOBsub</para></listitem>
  <listitem><para>OGM</para></listitem>
  <listitem><para>CC (closed caption[скрытые титры])</para></listitem>
  <listitem><para>MicroDVD</para></listitem>
  <listitem><para>SubRip</para></listitem>
  <listitem><para>SubViewer</para></listitem>
  <listitem><para>Sami</para></listitem>
  <listitem><para>VPlayer</para></listitem>
  <listitem><para>RT</para></listitem>
  <listitem><para>SSA</para></listitem>
  <listitem><para>PJS (Phoenix Japanimation Society)</para></listitem>
  <listitem><para>>MPsub</para></listitem>
  <listitem><para>AQTitle</para></listitem>
  <listitem><para><ulink url="http://unicorn.us.com/jacosub/">JACOsub</ulink></para></listitem>
</itemizedlist>
</para>

<para>
<application>MPlayer</application> может конвертировать вышеперечисленные форматы
субтитров (<emphasis role="bold">кроме первых трёх</emphasis>) в следующие форматы
с помощью соответствующих опций:
<itemizedlist>
 <listitem><para>MPsub: <option>-dumpmpsub</option></para></listitem>
 <listitem><para>SubRip: <option>-dumpsrtsub</option></para></listitem>
 <listitem><para>MicroDVD: <option>-dumpmicrodvdsub</option></para></listitem>
 <listitem><para>JACOsub: <option>-dumpjacosub</option></para></listitem>
 <listitem><para>Sami: <option>-dumpsami</option></para></listitem>
</itemizedlist>
</para>

<para>
<application>MEncoder</application> может выдавать DVD субтитры
в <link linkend="menc-feat-extractsub">VOBsub</link> формате.
</para>

<para>
Опции значительно различаются для различных форматов:
</para>

<formalpara>
<title>VOBsub субтитры</title>
<para>
VOBsub субтитры состоят из большого (несколько мегабайт) <filename>.SUB</filename> файла,
и необязательных
<filename>.IDX</filename> и/или <filename>.IFO</filename> файлов.
Использование: если у Вас, например, есть файлы
<filename><replaceable>sample.sub</replaceable></filename>,
<filename><replaceable>sample.ifo</replaceable></filename> (необязательно),
<filename><replaceable>sample.idx</replaceable></filename> - Вы должны указать
<application>MPlayer</application>'у опции <option>-vobsub sample [-vobsubid <replaceable>id</replaceable>]</option> (можно указать полный путь).
Опция <option>-vobsubid</option> похожа на <option>-sid</option>
для DVD, с её помощью, Вы можете выбирать между дорожками субтитров (языками).
В случае, если <option>-vobsubid</option> пропущена, MPlayer попытается использовать
языки, полученные через опцию <option>-slang</option> и перейти к пункту
<systemitem>langidx</systemitem> в <filename>.IDX</filename> файле, чтобы выбрать язык субтитров. Если и это
не удаётся, то субтитров не будет.
</para>
</formalpara>

<formalpara>
<title>Другие субтитры</title>
<para>
Прочие форматы субтитров состоят из единого текстового файла, содержащего информацию
о синхронизации, местоположении и тексте субтитра.
Использование: Если у Вас есть, например, файл
<filename><replaceable>sample.txt</replaceable></filename>,
Вы должны указать опцию <option>-sub <replaceable>sample.txt</replaceable></option>
(можно указать полный путь).
</para>
</formalpara>

<variablelist>
<title>Регулировка синхронизации и местоположения субтитров:</title>
<varlistentry>
  <term><option>-subdelay <replaceable>sec</replaceable></option></term>
  <listitem><para>
    Задерживает субтитры на <option><replaceable>sec</replaceable></option>
    секунд. Это значение может быть отрицательным.
  </para></listitem>
</varlistentry>
<varlistentry>
  <term><option>-subfps <replaceable>RATE</replaceable></option></term>
  <listitem><para>
    Указывает количество кадров/сек для файла субтитров (вещественное число)
  </para></listitem>
</varlistentry>
<varlistentry>
  <term><option>-subpos <replaceable>0-100</replaceable></option></term>
  <listitem><para>
    Указывает позицию субтитров.
  </para></listitem>
</varlistentry>
</variablelist>

<para>
Если Вы наблюдаете увеличивающуюся задержку между фильмом и субтитрами, используя
файл субтитров в формате MicroDVD, наиболее вероятно, что частота кадров у фильма и файла
субтитров не совпадают. Пожалуйста, обратите внимание, что формат MicroDVD
использует абсолютные номера кадров для синхронизации, но в нем нет информациио частоте кадров
и поэтому опция
<option>-subfps</option> не может использоваться с этим форматом.
Вы должны, если хотите навсегда решить эту проблему, вручную конвертировать
частоту кадров файла субтитров.
<application>MPlayer</application> может сделать для вас это преобразование:
<screen>
mplayer -dumpmicrodvdsub -fps <replaceable>subtitles_fps</replaceable> -subfps <replaceable>avi_fps</replaceable> \
    -sub <replaceable>subtitle_filename</replaceable> <replaceable>dummy.avi</replaceable>
</screen>
</para>

<para>
О DVD субтитрах, читайте в секции <link linkend="dvd">DVD</link>.
</para>
</sect1>


<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->


<sect1 id="control">
<title>Управление</title>

<para>
<application>MPlayer</application> использует полностью конфигурируемый,
основанный на понятии команды, уровень управления, позволяющий манипулировать
<application>MPlayer</application>'ом с клавиатуры, мышью, джойстиком или
с пульта дистанционного управления (используя LIRC). Полный список кнопок
для управления с клавиатуры см. на man-странице.
</para>

<!-- ********** -->

<sect2 id="ctrl-cfg">
<title>Конфигурация управления</title>

<para>
<application>MPlayer</application> позволяет повесить любую MPlayer'овскую
команду на любую кнопку, используя простой конфигурационный файл. Синтаксис
файла состоит из имени кнопки, сопровождающегося командой. По умолчанию
конфигурационный файл находится в <filename>$HOME/.mplayer/input.conf</filename>,
но это можно изменить, указав опцию
<option>-input <replaceable>conf</replaceable></option>
(относительный путь указывается относительно <filename>$HOME/.mplayer</filename>).
</para>

<example id="input_control_file">
<title>Простой файл конфигурации ввода</title>
<programlisting>
##
## MPlayer input control file
##

RIGHT seek +10
LEFT seek -10
- audio_delay 0.100
+ audio_delay -0.100
q quit
&gt; pt_step 1
&lt; pt_step -1
ENTER pt_step 1 1<!--
--></programlisting>
</example>

</sect2>

<!-- ********** -->

<sect2 id="lirc">
<title>Управление через LIRC</title>

<para>
Linux Infrared Remote Control[Инфракрасное Удалённое Управление Linux'ом]
&mdash; используйте легко собираемый в домашних условиях IR-приёмник, (почти)
любой пульт управления и управляйте с их помощью Вашей Linux машиной.
Подробности на <ulink url="http://www.lirc.org">www.lirc.org</ulink>.
</para>

<para>
Если у Вас установлен ракет lirc, configure само его обнаружит. Если Всё прошло
хорошо, <application>MPlayer</application> при старте напечатает сообщение,
похожее на "<computeroutput>Setting up lirc support...</computeroutput>".
Если произошла ошибка, он Вам сообщит. Если он не говорит ничего про LIRC,
то поддержка LIRC не была скомпилирована. Вот так :-)
</para>

<para>
Имя приложения для <application>MPlayer</application> &mdash; угадайте &mdash;
<filename>mplayer</filename>.  Вы можете использовать все команды mplayer'а и
даже можете использовать более одной команды, разделив их символами
<literal>\n</literal>. Не забудьте включить флаг repeat[повтор] в
<filename>.lircrc</filename>, когда это имеет смысл (перемещение, громкость
и т.п.). Вот выдержка из моего <filename>.lircrc</filename>:
</para>

<programlisting>
begin
     button = VOLUME_PLUS
     prog = mplayer
     config = volume 1
     repeat = 1
end

begin
    button = VOLUME_MINUS
    prog = mplayer
    config = volume -1
    repeat = 1
end

begin
    button = CD_PLAY
    prog = mplayer
    config = pause
end

begin
    button = CD_STOP
    prog = mplayer
    config = seek 0 1\npause
end<!--
--></programlisting>

<para>
Если Вам не нравится стандартное место Вашего конфигурационного файла lirc
(<filename>~/.lircrc</filename>), используйте опцию <option>-lircconf
<replaceable>filename</replaceable></option>, чтобы указать другой файл.
</para>
</sect2>

<!-- ********** -->

<sect2 id="slave-mode">
<title>Подчинённый ("рабский") режим</title>
<para>
Наличие подчинённого режима позволяет Вам создавать простые приложения к
<application>MPlayer</application>'у. Когда режим включён (опцией
<option>-slave</option>), <application>MPlayer</application> читает со
стандартного входа команды, разделяемые символом конца строки (\n).
Команды документированы в файле
<ulink url="../../tech/slave.txt">slave.txt</ulink>.
</para>
</sect2>
</sect1>


<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->


<sect1 id="streaming">
<title>Сетевые потоки и каналы</title>

<para>
<application>MPlayer</application> может проигрывать файлы по сети, используя
HTTP, FTP, MMS или RTSP/RTP протокол.
</para>

<para>
Проигрывание включается добавлением URL'а в командную строку.
Также, <application>MPlayer</application> учитывает переменную среды
<envar>http_proxy</envar> и использует прокси[proxy], если это возможно.
Также можно заставить использовать прокси:
<screen>
mplayer <replaceable>http_proxy://proxy.micorsops.com:3128/http://micorsops.com:80/stream.asf</replaceable>
</screen>
</para>

<para>
<application>MPlayer</application> может считывать данные со стандартного входа
(а <emphasis>не</emphasis> из поименованных каналов). Это может, например,
использоваться при проигрывании файлов по FTP:
<screen>
wget <replaceable>ftp://micorsops.com/something.avi</replaceable> -O - | mplayer -
</screen>
</para>

<note><para>
Мы рекомендуем включать <option>-cache</option> при проигрывании из сети:
<screen>
wget <replaceable>ftp://micorsops.com/something.avi</replaceable> -O - | mplayer -cache 8192 -
</screen>
</para></note>

<!-- ********** -->

<sect2 id="streaming-save">
<title>Сохранение потоковых данных</title>
<para>
Как только вам удалось воспроизвести любимый интернет-поток, вы
можете воспользоваться опцией <option>-dumpstream</option>, чтобы
сохранить его в файл.
Например:
<screen>
mplayer <replaceable>http://217.71.208.37:8006</replaceable> -dumpstream -dumpfile <replaceable>stream.asf</replaceable>
</screen>
сохранит данные из потока
<replaceable>http://217.71.208.37:8006</replaceable> в
<replaceable>stream.asf</replaceable>.
Это работает для всех протоколов, поддерживаемых
<application>MPlayer</application>, таких как MMS, RSTP, и других.
</para>
</sect2>
</sect1>


<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->


<sect1 id="drives">
<title>Приводы CD/DVD</title>

<para>
Современные приводы CD-ROM могут работать на очень высоких скоростях, некоторые
из них способны регулировать скорость чтения. Несколько аргументов за
использование этой возможности:
</para>

<itemizedlist>
<listitem><para>
  На высоких оборотах возрастает вероятность ошибки при чтении, особенно с
  плохо штампованных дисков. Уменьшение скорости может предотвратить потерю
  данных в этом случае.
</para></listitem>

<listitem><para>
  Многие CD-ROM приводы ужасно шумят, а снижение скорости может привести
  к уменьшению шума.
</para></listitem>
</itemizedlist>

<!-- ********** -->

<sect2 id="drives_linux">
<title>Linux</title>

<para>
Вы можете уменьшить скорость вращения IDE CD-ROM приводов программами
<command>hdparm</command>,<command>setcd</command> или <command>cdctl</command>. Это работает так:
<screen>hdparm -E <replaceable>[скорость]</replaceable> <replaceable>[устройство cdrom]</replaceable></screen>
<screen>setcd -x <replaceable>[скорость]</replaceable> <replaceable>[устройство cdrom]</replaceable></screen>
<screen>cdctl -bS <replaceable>[скорость]</replaceable></screen>
</para>

<para>
Если используется эмуляция SCSI, Вам следует применять настройки к реальному IDE
устройству, а не сэмулированному SCSI.
</para>

<para>
Если у Вас есть привилегии администратора, следующая команда
тоже может оказаться полезной:
<screen>echo file_readahead:2000000 &gt; /proc/ide/<replaceable>[устройство cdrom]</replaceable>/settings</screen>
</para>

<para>
Таким образом, предварительно считывается 2 мегабайта (полезно при
дисках с царапинами). Если поставить слишком большое значение, то постоянный
запуск и остановка вращения диска ужасно снизят эффективность.
Рекомендуется также подстроить привод, используя <command>hdparm</command>:
<screen>hdparm -d1 -a256 -u1 <replaceable>[устройство cdrom]</replaceable></screen>
</para>

<para>
Этой командой включается прямой доступ к памяти[DMA], предварительное
чтение и размаскировка IRQ (прочтите man-страницу <command>hdparm</command>,
с более подробным описанием).
</para>

<para>
Обратитесь к
"<filename>/proc/ide/<replaceable>[устройство cdrom]</replaceable>/settings</filename>"
для подстройки Вашего CD-ROM привода.
</para>

<para>
Вы можете настроить скорость SCSI CD-ROM приводов с помощью
<command>sdparm</command>, необходима версия 1.03 или выше:
<screen>sdparm --command=speed=<replaceable>[скорость в кБ/с]</replaceable> <replaceable>[устройство cdrom]</replaceable></screen>
Скорость должна быть указана в килобайтах в секунду, привод
округлит её надлежащим образом. Пожалуйста, обратитесь с странице
руководства sdparm для деталей.
</para>

<para>
There is also a dedicated tool that works for
<ulink url="http://das.ist.org/~georg/">Plextor SCSI drives</ulink>.
</para>
</sect2>

<!-- ********** -->

<sect2 id="drives_freebsd">
<title>FreeBSD</title>
<para>Скорость:
<screen>cdcontrol [-f <replaceable>устройство</replaceable>] speed <replaceable>[скорость]</replaceable></screen></para>
<para>DMA: <screen>sysctl hw.ata.atapi_dma=1</screen></para>
</sect2>
</sect1>


<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->


<sect1 id="dvd">
<title>Воспроизведение DVD</title>

<para>
Полный список возможных опций можно прочитать в man странице.
Синтаксис для воспроизведения стандартного DVD таков:
<screen>mplayer dvd://<replaceable>&lt;ролик&gt;</replaceable> [-dvd-device <replaceable>устройство</replaceable>]</screen>
</para>

<para>
Пример:
<screen>mplayer dvd://1 -dvd-device /dev/hdc</screen>
</para>

<para>
Если вы собрали <application>MPlayer</application> с поддержкой dvdnav, синтаксис тот же,
просто укажите dvdnav:// вместо dvd://.
</para>

<para>
Устройство DVD по умолчанию &mdash; это <filename>/dev/dvd</filename>. Если Ваши
настройки отличаются, создайте символическую ссылку или укажите правильное
устройство в командной строке, используя опцию <option>-dvd-device</option>.
</para>

<para>
<application>MPlayer</application> использует библиотеки <systemitem>libdvdread
</systemitem> и <systemitem>libdvdcss</systemitem> для воспроизведения и расшифровки DVD.
Эти две библиотеки содержатся в дереве исходного кода
<application>MPlayer</application>'а, так что отдельно устанавливать их не нужно.
Вы также можете использовать уже установленные в системе версии библиотек, но это
<emphasis role="bold">не рекомендуется</emphasis>, так как может приводить к
ошибкам, несовместимости и потере скорости.
</para>

<note><para>
В случае проблем с декодированием DVD, попробуйте отключить supermount или
другие подобные удобства. Некоторые RPC-2 устройства могут требовать
уcтановку кода региона.
</para></note>

<formalpara>
<title>Расшифровка DVD</title>
<para>
Расшифровка DVD осуществляется библиотекой <systemitem>libdvdcss</systemitem>.
Метод может быть указан переменной окружения <envar>DVDCSS_METHOD</envar>,
подробную информацию смотрите на странице руководства man.
</para>
</formalpara>

<!-- ********** -->

<sect2 id="region_code">
<title>Региональный код</title>

<para>
Современные DVD приводы имеют дурацкое ограничение, называемое
<ulink url="http://ru.wikipedia.org/wiki/Код_зоны_DVD">региональным кодом</ulink>.
Это &mdash; способ заставить DVD приводы воспроизводить DVD диски, созданные для одного из
шести различных регионов, на которые разделен мир.
Как может группа людей сесть за стол, придумать подобное и
при этом ожидать, что мир 21-го века поклонится их воле &mdash; это
за пределами человеческого понимания.
</para>

<para>
Приводы, реализующие региональную защиту исключительно при помощи
программного обеспечения, известны как RPC-1 приводы, реализующие ее
аппаратно &mdash; RPC-2. RPC-2 приводы позволяют пять раз изменить код региона,
после чего он фиксируется навсегда. В Linux Вы можете воспользоваться
утилитой <ulink url="http://linvdr.org/projects/regionset/">regionset</ulink>
для установки регионального кода Вашего DVD привода.
</para>

<para>
К счастью, возможна переделка RPC-2 приводов в RPC-1, через
обновление прошивки. Укажите модель Вашего DVD привода в Вашем любимом
поисковике или посмотрите на форуме и разделах загрузок на
<ulink url="http://www.rpc1.org/">"Странице прошивок"</ulink>.
Хотя обычные предостережения, касающиеся обновления прошивки, остаются в силе,
опыт избавления от региональной защиты в основном положителен.
</para>
</sect2>

</sect1>


<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->


<sect1 id="vcd">
<title>Воспроизведение VCD</title>
<para>
Полный список возможных опций можно прочитать в man. Синтаксис для обычного
Видео-CD (VCD):
<screen>mplayer vcd://<replaceable>&lt;дорожка&gt;</replaceable> [-cdrom-device <replaceable>&lt;устройство&gt;</replaceable>]</screen>
Пример:
<screen>mplayer vcd://2 -cdrom-device /dev/hdc</screen>
Устройство VCD по умолчанию &mdash; <filename>/dev/cdrom</filename>. Если Ваши
настройки отличаются, создайте символическую ссылку добавьте правильное название
в командной строке после опции <option>-cdrom-device</option>.
</para>

<note><para>
По крайней мере Plextor'ы и некоторые Toshiba SCSI CD-ROM приводы показывают
ужасную производительность при чтении VCD'ов. Это объясняется тем, что
CDROMREADRAW <systemitem>ioctl</systemitem> на этих приводах реализован не полностью.
Если Вы имеете некоторые познания в сфере программирования SCSI, пожалуйста
<ulink url="../../tech/patches.txt">помогите нам</ulink> в написании поддержки
SCSI generic для VCD.
</para></note>

<para>
В настоящий момент Вы можете извлечь данные с VCD, используя
<ulink url="http://ftp.ntut.edu.tw/ftp/OS/Linux/packages/X/viewers/readvcd/">
readvcd</ulink>, и воспроизвести получившийся файл <application>MPlayer
</application>'ом.
</para>

<formalpara>
<title>Структура VCD</title>
<para>
VCD составлен из секторов CD-ROM XA, т.е. дорожек CD-ROM mode 2 form 1 и form 2:
<itemizedlist>
<listitem><para>
  Первая дорожка записана в mode 2 form 2 формате, что, в частности, означает
  использование коррекции ошибок L2. Дорожка содержит файловую систему ISO-9660 с
  секторами по 2048 байт. Там содержатся метаданные VCD,
  и картинки, часто использующиеся в меню. Здесь также могут храниться
  фрагменты MPEG для меню, но каждый из них должен быть разбит на кусочки по
  150 секторов. Еще файловая система может хранить файлы или программы,
  не имеющие отношения к работе с VCD.
</para></listitem>

<listitem><para>
  Вторая и остальные дорожки содержат MPEG-поток секторами по 2324 байта, по
  одному пакету MPEG PS на сектор вместо файловой системы. Это дорожки в формате
  mode 2 form 1 и хранят больше информации на один сектор за счет потери возможности
  некоторой коррекции ошибок. После первой дорожки также допустимо присутствие
  дорожки CD-DA. В некоторых ОС используются различные трюки, чтобы сделать  эти
  не-ISO-9660 дорожки видимыми  в файловой системе. Но Linux
  &mdash; это не тот случай (пока).
  Здесь MPEG данные <emphasis role="bold">не могут быть смонтированы</emphasis>.
  (Вы когда-нибудь монтировали аудио диск
  для того, чтобы его воспроизвести?) Так как большинство фильмов находится именно на
  таких дорожках, попробуйте сначала <option>vcd://2</option>.
</para></listitem>

<listitem><para>
  Существуют VCD диски без первой дорожки (единственная дорожка без файловой
  системы). Они проигрываются, но не монтируются.
</para></listitem>

<listitem><para>
  Описание стандарта Video CD называется
  Philips "White Book" и, как правило, недоступна в онлайн, т.к. должна приобретаться
  у Philips. Более подробная информация о Video CD может быть найдена в
  <ulink
  url="http://www.vcdimager.org/pub/vcdimager/manuals/0.7/vcdimager.html#SEC4">документации vcdimager</ulink>.
</para></listitem>
</itemizedlist>
</para>
</formalpara>

<formalpara>
<title>Про файлы .DAT</title>
<para>
Файл примерно в 600 мегабайт на первой дорожке не настоящий! Это так
называемый ISO-переход, созданный, чтобы позволить Windows обрабатывать эти
дорожки (Windows вообще запрещает приложениям использовать прямой доступ
к устройствам). Под Linux Вы не можете копировать эти файлы (они выглядят, как
мусор). Под Windows это возможно, поскольку там iso9660 эмулирует прямой доступ
к дорожкам через этот файл. Чтобы проигрывать .DAT файл Вам нужен драйвер,
из Linux версии PowerDVD. Это модифицированный драйвер
iso9660 файловой системы (<filename>vcdfs/isofs-2.4.X.o</filename>), который
способен эмулировать прямой доступ к дорожкам через этот файл. Если Вы
замонтируете диск, используя их драйвер, Вы можете копировать и даже проигрывать
.DAT файлы <application>MPlayer</application>'ом. Но это не будет работать со
стандартным драйвером iso9660 из ядра Linux! Используйте вместо этого
<option>vcd://</option>. Альтернативами для копирования VCD может послужить новый
драйвер <ulink url="http://www.elis.rug.ac.be/~ronsse/cdfs/">cdfs</ulink> (не
входит в официальное ядро) который показывает дорожки[сессии] на диске как файлы
образов и <ulink url="http://cdrdao.sf.net/">cdrdao</ulink>, приложение для
побитового чтения/копирования CD.
</para>
</formalpara>
</sect1>


<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->


<sect1 id="edl" xreflabel="Редактируемые списки решений [Edit Decision Lists] (EDL)">
<title>Редактируемые списки решений [Edit Decision Lists] (EDL)</title>

<para>
Система редактируемых списков решений [edit decision list] (EDL) позволяет Вам
автоматически пропускать или заглушать части при воспроизведении, основываясь
на специфичном для каждого фильма конфигурационном файле.
</para>

<para>
Это полезно для тех, кто может захотеть посмотреть фильм в "семейном" режиме.
Вы можете исключить любые проявления насилия, ненормативной лексики,
Jar-Jar Binks, и т. п. из фильмов, сообразуясь с Вашими личными предпочтениями.
Помимо этого, существуют другие применения, например автоматический пропуск рекламы
при просмотре фильмов.
</para>

<para>
Формат EDL файлов пока элементарен. в каждой строке находится одна команда, которая
указывает, что делать (пропустить/выключить звук) и когда (используя pts в секундах).
</para>

<!-- ********** -->

<sect2 id="edl_using">
<title>Использование EDL файлов</title>

<para>
Включите опцию <option>-edl &lt;имя_файла&gt;</option>, когда Вы запускаете
<application>MPlayer</application>, с именем EDL файла, который Вы хотите
использовать с видео.
</para>
</sect2>

<sect2 id="edl_making">
<title>Создание EDL файлов</title>
<para>
Текущий формат файлов EDL:
<programlisting>[начальная секунда] [конечная секунда] [действие]</programlisting>
Где секунды - это числа с плавающей точкой (вещественные числа), а действие -
это или <literal>0</literal> для пропуска или <literal>1</literal> для
заглушения звука. Пример:
<programlisting>
5.3   7.1    0
15    16.7   1
420   422    0
</programlisting>
Это вызовет пропуск видео с 5.3 секунды до 7.1 секунды, затем заглушит звук
на 15 секунде, включит обратно в 16.7 секунд и пропустит видео с 420 по 422
секунды. Эти действия будут происходить, когда таймер проигрывания достигнет
указанных в файле значений.
</para>

<para>
Чтобы начать создать EDL файл, используйте опцию <option>-edlout
&lt;filename&gt;</option>. При проигрывании, когда Вы хотите отметить
предыдущие две секунды для пропуска, нажмите <keycap>i</keycap>.
Соответствующая запись для этого времени будет добавлена в файл. Затем Вы
можете вернуться и подстроить сгенерированный EDL файл также как и
поправить действие по-умолчанию (пропуск блока, указанного в строке).
</para>
</sect2>
</sect1>


<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->


<sect1 id="advaudio" xreflabel="Advanced Audio">
<title>Расширенные возможности аудио</title>

<sect2 id="advaudio-surround">
<title>Окружающее/Многоканальное[Surround/Multichannel] воспроизведение</title>

<sect3 id="advaudio-surround-DVD">
<title>DVD'шники</title>

<para>
Большинство DVD и многие другие файлы содержат окружающий звук.
<application>MPlayer</application> поддерживает воспроизведение такого звука, но
не задействует его по-умолчанию, поскольку стерео оборудование более распространено.
Для воспроизведения файла с более чем двумя каналами звука, используйте опцию
 <option>-channels</option>. Например, для воспроизведения DVD со звуком 5.1:
<screen>mplayer dvd://1 -channels 6</screen>
Имейте ввиду, что несмотря на название "5.1" на самом деле присутствует
шесть независимых каналов. Если у вас есть соответствующее оборудование, вы
спокойно можете добавить опцию <option>channels</option> в конфигурационный
файл <filename>~/.mplayer/config</filename> <application>MPlayer</application>'а.
Например, для установки по умолчанию квадрофонического[quadraphonic] воспроизведения, добавьте
такую строку:
<programlisting>channels=4</programlisting>
<application>MPlayer</application> будет выводить четырехканальный звук, если все четыре
есть в проигрываемом файле.
</para>
</sect3>


<sect3 id="advaudio-surround-stereoinfour">
<title>Воспроизведение стерео звука на четырех колонках</title>

<para>
По-умолчанию, <application>MPlayer</application> не дублирует никакие каналы, как и
большинство звуковых драйверов. Если вы хотите, сделайте это самостоятельно:
<screen>mplayer <replaceable>filename</replaceable> -af channels=2:2:0:1:0:0</screen>
Объяснения ищите в разделе
<link linkend="advaudio-channels-copying">копирование каналов</link>.
</para>
</sect3>


<sect3 id="advaudio-surround-passthrough">
<title>Передача AC-3/DTS</title>

<para>
DVD, как правило, имеют окружающий звук, кодированный в AC-3 (Dolby Digital) или DTS
(Digital Theater System[система цифрового кинотеатра]) формате.  Некоторое
современное аудио оборудование способно самостоятельно декодировать эти форматы.
<application>MPlayer</application> может быть сконфигурирован, чтобы передавать
данные без их декодирования. Это работает только для наличие в вашей звуковой карте
разъема S/PDIF (Sony/Philips Digital Interface[цифровой интерфейс Sony/Philips]).
</para>

<para>
Если ваше оборудование может декодировать и AC-3, и DTS, выможете спокойно
задействовать передачу для обоих форматов. В противном случае включайте
передачу только того формата, который поддерживается оборудованием.
</para>

<itemizedlist>
<title>Чтобы включить передачу из командной строки:</title>
<listitem><para>
  только для AC-3, используйте <option>-ac hwac3</option>
</para></listitem>
<listitem><para>
  только для DTS, используйте <option>-ac hwdts</option>
</para></listitem>
<listitem><para>
  для AC-3 и DTS, используйте <option>-afm hwac3</option>
</para></listitem>
</itemizedlist>

<itemizedlist>
<title>Чтобы включить передачу в файле настроек <application>MPlayer</application>:
</title>
<listitem><para>
  только для AC-3: <option>ac=hwac3,</option>
</para></listitem>
<listitem><para>
  только для DTS: <option>ac=hwdts,</option>
</para></listitem>
<listitem><para>
  для AC-3 и DTS: <option>afm=hwac3</option>
</para></listitem>
</itemizedlist>

<para>
Заметьте, что в конце <option>ac=hwac3,</option> и <option>ac=hwdts,</option>
присутствует запятая (","). В этом случае
<application>MPlayer</application> вернется к кодеку, который он обычно использует,
при воспроизведении файла, не содержащего звука AC-3 или DTS.
<option>afm=hwac3</option> запятой не требует;
Когда указано семейство аудио, <application>MPlayer</application> вернется к нужному кодеку так
или иначе.
</para>
</sect3>


<sect3 id="hwmpa-surround-passthrough">
<title>Передача MPEG аудио</title>

<para>
Передатчики цифрового ТВ (такие как DVB и ATSC) и некоторые DVD, обычно имеют
аудио потоки MPEG (в частности MP2). Некоторые аппаратные MPEG декодеры, такие как
полнофункциональные DVB карты и DXR2 адаптеры имеют встроенную возможность
декодирования этого формата.
<application>MPlayer</application> может быть настроен для передачи аудио данных
без из декодирования.
</para>

<para>
Для использования этого кодека:
<screen> mplayer -ac hwmpa </screen>
</para>
</sect3>


<sect3 id="advaudio-surround-matrix">
<title>Matrix-кодированное[matrix-encoded] аудио</title>

<para>
<emphasis>***TODO***</emphasis>
</para>
<para>
Этот раздел пока не написан, и не может быть завершен, пока кто-нибудь не
предоставить нам образцы файлов для тестирования. Если у вас есть
matrix-кодированные файлы, знаете где их можно достать или имеете информацию,
которая может быть полезна, отошлите сообщение в рассылку
<ulink url="http://lists.mplayerhq.hu/mailman/listinfo/mplayer-docs">MPlayer-DOCS</ulink>.
Укажите в теме письма [matrix-encoded audio].
</para>
<para>
Если не появятся файлы или какая-нибудь информация, этот раздел будет удален.
</para>

<para>
Полезные ссылки:
<itemizedlist>
<listitem><para>
  <ulink url="http://electronics.howstuffworks.com/surround-sound5.htm">http://electronics.howstuffworks.com/surround-sound5.htm</ulink>
</para></listitem>
<listitem><para>
  <ulink url="http://www.extremetech.com/article2/0,1697,1016875,00.asp">http://www.extremetech.com/article2/0,1697,1016875,00.asp</ulink>
</para></listitem>
</itemizedlist>
</para>
</sect3>


<sect3 id="advaudio-surround-hrtf">
<title>Эмуляция окружающего звука в наушниках</title>

<para>
<application>MPlayer</application> содержит плагин HRTF (Head Related Transfer
Function), основанный на
<ulink url="http://sound.media.mit.edu/KEMAR.html">проекте MIT</ulink>
откуда взяты измерения от микрофонов, вмонтированных в макет человеческой головы.
</para>

<para>
Хотя точная имитация системы окружающего звука[surround system] невозможна,
<application>MPlayer</application>'овский плагин HRTF
<!-- FIXME need bette rtranslation
 does provide more spatially immersive audio in 2-channel headphones
 -->
производит более пространственный окружающий звук
на 2-х канальных наушниках. Обычное сведение, просто объединяет канали в два;
кроме объединения каналов, <option>hrtf</option> создает хитрое эхо, слегка
увеличивает разделение стерео, и меняет громкость некоторых частот.
Лучше ли звучит HRTF, зависеть от исходного звука, и является делом
личного вкуса, но его определенного стоит попробовать.
</para>

<para>
Для воспроизведения DVD с HRTF:
<screen>mplayer dvd://1 -channels 6 -af hrtf</screen>
</para>

<para>
<option>hrtf</option> работает хорошо тоько с 5-ю или 6-ю каналами. Также,
<option>hrtf</option> тербуется 48 kHz звук. DVD аудио уже kHz, но если у вас есть
файл, который вы хотите воспроизвести при помощи <option>hrtf</option> , с другой
частотой сэмплирования, необходимо его ресэмплировать[resample]:
<screen>
mplayer <replaceable>filename</replaceable> -channels 6 -af resample=48000,hrtf
</screen>
</para>
</sect3>


<sect3 id="advaudio-surround-troubleshooting">
<title>Решение проблем</title>

<para>
Если вы ничего не слышите при использовании окружающего звука, проверьте
настройки вашего микшера при помощи такой как  <application>alsamixer</application>
программы; очень часто по-умолчанию выходной звук  выключен или его уровень
установлен в ноль.
</para>
</sect3>
</sect2>

<!-- ********** -->

<sect2 id="advaudio-channels">
<title>Манипуляции с каналами</title>

<sect3 id="advaudio-channels-general">
<title>Общая информация</title>

<para>
К сожалению, нет стандарта, описывающего порядок следования каналов. Порядки, указанные ниже,
таковые из AC-3 и довольно типичны; попробуйте их и увидите совпадают ли они с вашим источником.
Каналы нумеруются с нуля.

<orderedlist spacing="compact">
<title>mono[моно]</title>
  <listitem override="0"><para>center[центральный]</para></listitem>
</orderedlist>

<orderedlist spacing="compact">
<title>stereo[стерео]</title>
  <listitem override="0"><para>left[левый]</para></listitem>
  <listitem><para>right[правый]</para></listitem>
</orderedlist>

<orderedlist spacing="compact">
<title>quadraphonic[квадрофонический]</title>
<listitem override="0"><para>left front[левый передний]</para></listitem>
  <listitem><para>right front[правый передний]</para></listitem>
  <listitem><para>left rear[левый задний]</para></listitem>
  <listitem><para>right rear[правый задний]</para></listitem>
</orderedlist>

<orderedlist spacing="compact">
<title>surround 4.0[окружение 4.0]</title>
  <listitem override="0"><para>left front[левый передний]</para></listitem>
  <listitem><para>right front[правый передний]</para></listitem>
  <listitem><para>center rear[центральный задний]</para></listitem>
  <listitem><para>center front[центральный передний]</para></listitem>
</orderedlist>

<orderedlist spacing="compact">
<title>surround 5.0[]окружение 5.0</title>
  <listitem override="0"><para>left front[левый передний]</para></listitem>
  <listitem><para>right front[правый передний]</para></listitem>
  <listitem><para>left rear[левый задний]</para></listitem>
  <listitem><para>right rear[правый задний]</para></listitem>
  <listitem><para>center front[центральный передний]</para></listitem>
</orderedlist>

<orderedlist spacing="compact">
<title>surround 5.1[окружение 5.1]</title>
  <listitem override="0"><para>left front[левый передний]</para></listitem>
  <listitem><para>right front[правый передний]</para></listitem>
  <listitem><para>left rear[левый задний]</para></listitem>
  <listitem><para>right rear[правый задний]</para></listitem>
  <listitem><para>center front[центральный передний]</para></listitem>
  <listitem><para>subwoofer[сабвуфер]</para></listitem>
</orderedlist>
</para>

<para>
Опция <option>-channels</option> используется для запроса количества каналов у
аудио декодера. Некоторые аудио кодеки используют указанное количество каналов
для определения необходимо ли сведение каналов. Заметьте, что это не всегда
отражается на количестве выходных каналов. Например, используя
<option>-channels 4</option> для проигрывания стерео MP3 файла будет по-прежнему
выводить звук на два канала, поскольку MP3 кодек не создает дополнительных каналов.
</para>

<para>
Аудио плагин <option>channels</option> может использоваться для создания или
удаления каналов, и полезен для управления количеством каналов, отсылаемых на
звуковую карту. Смотрите следующие разделы для получения информации о манипуляции
каналами.
</para>
</sect3>


<sect3 id="advaudio-channels-mono">
<title>Воспроизведение моно на двух колонках</title>

<para>
Моно звук намного лучше звучит, при воспроизведении на двух колонках - особенно
при использовании наушников. Аудиофайлы, реально имеющие один канал, автоматически
проигрываются через две колонки; к сожалению, множество файлов с моно звуком
кодированы как стерео с тишиной в одном из каналов. Простейший и безопасный
способ воспроизведения одинакового звука на обеих колонках состоит в использовании
плагина <option>extrastereo</option>:
<screen>
mplayer <replaceable>filename</replaceable> -af extrastereo=0
</screen>
</para>

<para>
Он усредняет оба канала, делая каждый в два раза тише изначального.
В следующих разделах приводятся другие способы сделать то же самое
без уменьшения громкости, но они сложнее и требуют указания различных опций
в зависимости от того, какой канал остается. Если вам действительно требуется
управлять громкостью, бутет проще поэкспериментировать с плагином
<option>volume</option> и определить верное значение. Например:

<screen>mplayer <replaceable>filename</replaceable> -af extrastereo=0,volume=5</screen>

</para>

</sect3>


<sect3 id="advaudio-channels-copying">
<title>Копирование/перемещение каналов</title>

<para>
Плагин <option>channels</option> может переместить любой или все каналы.
Установка всех подопций плагина <option>channels</option>
не так проста и требует определенной аккуратности.

<orderedlist spacing="compact">
<listitem><para>
  Определитесь, сколько выходных каналов  вам необходимо. Это первая подопция.
</para></listitem>
<listitem><para>
  Посчитайте количество перемещаемых каналов. Это вторая подопция.Каждый канал может быть
  перемещен в несколько отличных каналов одновременно, но учтите, что исходный канал
  (даже при перемещении в одно место) будет пуст, пока в него не переместится
  какой-либо другой. Для копирования канала, оставляя исходный неизменным, просто
  переместите канал одновременно в требуемый и исходный. Например:
  <programlisting>
канал 2 --> канал 3
канал 2 --> канал 2<!--
  --></programlisting>
</para></listitem>
<listitem><para>
  Запишите копии каналов в виде пары подопций. Заметьте, что первый канал - это 0,
  второй - 1 и т.д. Порядок следования значений не имеет, пока они правильно сгруппированы
  в пары <replaceable>исходный:результирующий</replaceable>.
</para></listitem>
</orderedlist>
</para>

<bridgehead>Пример: один канал на две колонки</bridgehead>
<para>
Это пример другого способа воспроизвести один канал на обе колонки.
В нем предполагается, что левый канал должен воспроизводиться, а правый надо отбросить.
Выполняем шаги, описанные выше:
<orderedlist>
<listitem><para>
  Для создания по каналу на каждую из колонок, первая подопция должна быть 2.
</para></listitem>
<listitem><para>
  Левый канал надо переместить на правый и на себя, чтобы он не оставался пуст.
  Всего два перемещения, делаем вторую подопцию тоже равной "2".
</para></listitem>
<listitem><para>
  Для перемещения левого канала (канал 0) в правый (канал 1) пара подопций имеет вид "0:1",
  "0:0" перемещает левый канал на себя.
</para></listitem>
</orderedlist>
Собираем все вместе:
<screen>
mplayer <replaceable>filename</replaceable> -af channels=2:2:0:1:0:0
</screen>
</para>

<para>
Преимущество этого примере перед  <option>extrastereo</option> состоит в том,
что громкость каждого канала такая же как у исходного. Недостаток заключается в
необходимости изменить подопции на "2:2:1:0:1:1", если желаемый
канал - правый. К тому же его труднее запомнить и набрать.
</para>

<bridgehead>Пример: левый канал на две колонки (сокращение)</bridgehead>
<para>
На самом деле есть более простой способ использования плагина
<option>channels</option> для воспроизведения левого канала на обеих колонках:
<screen>mplayer <replaceable>filename</replaceable> -af channels=1</screen>
Второй канал отбрасывается и, при отсутствии других подопций, остается
единственным. Драйвер звуковой карты автоматически воспроизводит одноканальный
звук на обеих колонках. Но это сработает только если желаемый канал - левый.
</para>

<bridgehead>Пример: дублирование передних каналов на задние</bridgehead>
<para>
Другая обычная операция - это дублирование передних каналов и воспроизведение
их на задних колонках при квадрофонической настройке.
<orderedlist>
<listitem><para>
  Выходных каналов должно быть четыре. Первая подопция равна "4".
</para></listitem>
<listitem><para>
  Каждый из передних каналов надо переместить на соответствующий задний и на себя.
  Это четыре перемещения, так что вторая подопция равна "4".
</para></listitem>
<listitem><para>
  Левый передний (канал 0) надо переместить на левый задний (канал 2): "0:2".
  Левый передний также надо переместить на себя: "0:0". правый передний (канал 1)
  перемещается на правый задний (канал 3): "1:3", и на себя: "1:1".
</para></listitem>
</orderedlist>
Собираем все и получаем:
<screen>
mplayer <replaceable>filename</replaceable> -af channels=4:4:0:2:0:0:1:3:1:1
</screen>
</para>
</sect3>


<sect3 id="advaudio-channels-mixing">
<title>Микширование каналов</title>

<para>
Плагин <option>pan</option> пожет микшировать каналы в указанных пользователем
пропорциях. Он может делать все, что <option>channels</option>, и даже больше.
К сожалению, подопции намного сложнее.
<orderedlist>
<listitem><para>
  Определите со скольки каналами будете работать. Вам необходимо указать это
  при помощи <option>-channels</option> и/или <option>-af channels</option>.
  Дальнейшие примеры покажут когда какую использовать.
</para></listitem>
<listitem><para>
  Решите, сколько каналов скормить <option>pan</option> (дополнительные декодированные
  каналы отбрасываются). Это первая подопция, она также определяет сколько каналов
  готовится к выводу).
</para></listitem>
<listitem>
  <para>
  Оставшиеся подопции указывают какая часть каждого входного канала микшируется в
  в каждый выходной. Это самая сложная часть. Для решения задачи, разделите
  подопции на несколько наборов, по одному на каждый выходной канал. Каждая
  подопция в наборе относится к входному каналу.
  </para>
  <para>
  <option>pan</option> принимает значения от 0 до 512, давая от 0% до 51200%
  громкости исходного канала. Будьте осторожны, используя значения больше 1,
  если вы превысить диапазон сэмплинга вашей звуковой карты, вы услышите
  противный треск и скрежет. Если хотите, можете вслед за
  <option>pan</option> указать <option>,volume</option> для задействования обрезки,
  но лучше держать значения <option>pan</option> достаточно низкими, чтобы не
  требовалось обрезание.
  </para>
</listitem>
</orderedlist>
</para>

<bridgehead>Пример: один канал на две колонки</bridgehead>
<para>
Это еще один пример воспроизведения левого канала на двух колонках.
Следуя инструкциям выше:
<orderedlist>
<listitem><para>
<option>pan</option> должен выдать два канала, т.о. первая подопция равна "2".
</para></listitem>
<listitem><para>
  Поскольку входных каналов два, будет два набора подопций.
  Так как выходных каналов тоже два, то  будет по две подопции в каждом наборе.
  Левый канал из файла должен перейти с полной громкостью в новые левый и правый.
  Таким образом, первый набор подопций будет "1:1".
  правый канал должен быть отброшен, поэтому второй набор равен "0:0".
  Любые значения 0 в конце могут быть опущены, но для более легкого понимания мы их оставим.
</para></listitem>
</orderedlist>
Соединение опций дает:
<screen>mplayer <replaceable>filename</replaceable> -af pan=2:1:1:0:0</screen>
Если вместо правого канала нужен левый,  подопции для <option>pan</option>
будут "2:0:0:1:1".
</para>


<bridgehead>Пример: левый канал на две колонки (сокращение)</bridgehead>
<para>
Как и с <option>channels</option>, существует сокращенный вариант, который работает только
для левого канала:
<screen>mplayer <replaceable>filename</replaceable> -af pan=1:1</screen>
Поскольку <option>pan</option> имеет только один входной канал (остальные отбрасываются),
будет только одна подопция, указывающая, что единственный канал получает 100% собственной
громкости.
</para>

<bridgehead>Пример: сведение 6-канального PCM</bridgehead>
<para>
Декодер <application>MPlayer</application>'а для 6-канального PCM не способен сводить каналы.
Здесь описан способ сведения PCM, используя <option>pan</option>:
<orderedlist>
<listitem><para>
  Количество выходных каналов равно 2, значит первая подопция равна "2".
</para></listitem>
<listitem><para>
  С шестью входными каналами будем иметь шесть наборов подопций. К счастью, поскольку
  мы беспокоимся о выводе только первых двух, достаточно создать два набора;
  оставшиеся можно опустить. Имейте ввиду, что не все многоканальные имеют одинаковый
  порядок каналов. пример показывает как свести файл с порядком как у AC-3 5.1:
<programlisting>
0 - передний левый
1 - передний правый
2 - задний левый
3 - задний правый
4 - центральный передний
5 - сабвуфер<!--
  --></programlisting>
  В первом наборе указаны проценты от исходной громкости, в соответствующем порядке,
  которую каждый выходной канал получит от переднего левого канала: "1:0".
  Правый передний должен перейти в правый: "0:1".
  То же для задних: "1:0" и "0:1"
  Центральный должен попасть в оба с половинной громкостью: "0.5:0.5", и
  сабвуфер переходит в оба канала с полной громкостью: "1:1".
</para></listitem>
</orderedlist>
Все вместе:
<screen>
mplayer <replaceable>6-channel.wav</replaceable> -af pan=2:1:0:0:1:1:0:0:1:0.5:0.5:1:1
</screen>
Проценты, указанные выше всего лишь пример. подстраивайте их как вам удобно.
</para>

<bridgehead>Пример: Воспроизведение звука 5.1 на больших колонках без сабвуфера</bridgehead>
<para>
Если у вас есть пара огромных передних колонок, нет надобности тратиться на
сабвуфер для полноценной системы 5.1. Если использовать <option>-channels 5</option>
для запроса к liba52 на декодирование 5.1 аудио в 5.0, канал сабвуфера просто
отбрасывается. Если вы сотите самостоятельно распределить канал
сабвуфера, то потребуется ручное сведение при помощи <option>pan</option>:

<orderedlist>
<listitem><para>
  Поскольку <option>pan</option> надо анализировать все шесть каналов, укажите
<option>-channels 6</option>, чтобы liba52 декодировал их все.
</para></listitem>
<listitem><para>
  <option>pan</option> выводит только пять каналов, первая подопция равна 5.
</para></listitem>
<listitem><para>
  Шесть входных каналов означает шесть наборов по пять подопций в каждом.
  <itemizedlist spacing="compact">
  <listitem><para>
    Левый передний дублируется только на себя:
    "1:0:0:0:0"
  </para></listitem>
  <listitem><para>
    То же для правого переднего:
    "0:1:0:0:0"
  </para></listitem>
  <listitem><para>
    То же для левого заднего:
    "0:0:1:0:0"
  </para></listitem>
  <listitem><para>
    И то же для правого заднего:
    "0:0:0:1:0"
  </para></listitem>
  <listitem><para>
    Центральный передний, тоже:
    "0:0:0:0:1"
  </para></listitem>
  <listitem><para>
    И, наконец, мы должны решить что же делать с сабвуфером,
    например, половина на передний правый и половина на передний левый:
    "0.5:0.5:0:0:0"
  </para></listitem>
  </itemizedlist>
</para></listitem>
</orderedlist>
Собирая все подопции месте, получаем:
<screen>
mplayer <replaceable>dvd://1</replaceable> -channels 6 -af pan=5:1:0:0:0:0:0:1:0:0:0:0:0:1:0:0:0:0:0:1:0:0:0:0:0:1:0.5:0.5:0:0:0
</screen>
</para>
</sect3>
</sect2>

<!-- ********** -->

<sect2 id="advaudio-volume">
<title>Программная подстройка звука</title>

<para>
Некоторые звуковые дорожки без усиления слишком тихие для комфортного прослушивания.
Это становится проблемой, если звуковое оборудование не способно усиливать сигнал.
Опция <option>-softvol</option> указывает <application>MPlayer</application>'у
использовать встроенный микшер. После этого вы можете использовать клавиши
подстройки громкости (по-умолчанию <keycap>9</keycap> и <keycap>0</keycap>)
чтобы достичь значительно более громкого звучания. Заметьте, что это
не исключает использования микшера вашей карты; <application>MPlayer</application>
всего лишь усиливает сигнал перед отправкой его на звуковую карту.
Следующим пример может являться неплохим началом:
<screen>
mplayer <replaceable>quiet-file</replaceable> -softvol -softvol-max 300
</screen>
Опция <option>-softvol-max</option> указывает максимально допустимый уровень звука в
процентах от исходного. Например, <option>-softvol-max 200</option> позволит
увеличивать громкость вдвое по сравнению с оригинальным звуком.
Использование больших значений с<option>-softvol-max</option>; высокий уровень
громкости не будет достигнуть без использования клавиш регулирования громкости.
Единственный минус больших значений заключается в том, что, поскольку
<application>MPlayer</application>  регулирует громкость в процентах от
максимума, вы не будете иметь той же точности при использовании клавиш
регулирования громкости.
Используйте меньшее значение <option>-softvol-max</option> и/или укажите
<option>-volstep 1</option> если нужна повышенная точность.
</para>

<para>
Опция <option>-softvol</option> работает, управляя аудио плагином
<option>volume</option>. Если вам надо воспроизвести файл с определенной
громкостью от начальной, можете указать <option>volume</option> вручную:
<screen>mplayer <replaceable>quiet-file</replaceable> -af volume=10</screen>
Будет воспроизведен файл в усилением в 10 децибел. Будьте осторожны,
используя плагин <option>volume</option> - вы можете легко повредить
ваши уши слишком громким звуком. Начните с маленьких значений и постепенно
увеличивайте, пока не почувствуете, что достаточно. Также, если
указать черезчур высокие значения, <option>volume</option> может потребоваться
обрезать звук, чтобы избежать отправления на карту данных, превышающих
допустимые значение; это приведет к искажению звука.
</para>
</sect2>
</sect1>


<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->


<sect1 id="tv-input" xreflabel="TV вход">
<title>TV вход</title>

<para>
В этой секции описывается, как включить <emphasis role="bold">просмотр/захват
с V4L-совместимого TV тюнера</emphasis>. См. man страницу, для описания TV опций
и кнопок управления.
</para>

<!-- ********** -->

<sect2 id="tv-compilation">
<title>Компиляция</title>

<procedure>
<step><para>
  Во-первых, Вам нужно перекомпилировать <application>MPlayer</application>,
  <filename>./configure</filename> автоматически обнаружит заголовки ядра,
  относящиеся к v4l, и наличие <filename>/dev/video*</filename> устройств.
  Если они существуют, будет собрана поддержка TV (см. вывод
  <filename>./configure</filename>).
</para></step>
<step><para>
  Убедитесь, что Ваш тюнер работает с другими TV приложениями под Linux,
  например <application>XawTV</application>.
</para></step>
</procedure>
</sect2>

<!-- ********** -->

<sect2 id="tv-tips">
<title>Советы по использованию</title>
<para>
Полный список опций доступен на страницах руководства (man).
Вот всего несколько советов:

<itemizedlist>
<listitem><para>
  Используйте опцию <option>channels</option>. Пример:
  <screen>-tv channels=26-MTV1,23-TV2</screen>
  Объяснение: При использовании такой опции, будут использоваться только каналы 26
  и 23, и, кроме того, будет приятный OSD текст при переключении между каналами,
  отображающий название канала. Пробелы в названиях каналов должны быть заменены
  символом "_".
</para></listitem>
<listitem><para>
  Выберите разумные размеры изображения. Размеры полученного
  изображения должны делиться на 16.
</para></listitem>
<listitem>
  <para>
  Если Вы захватываете видео с вертикальным разрешением выше половины полного
  разрешения (т.е. 288 для PAL или 240 для NTSC), то получаемые вами 'кадры'
  на самом деле будут чередующимися[interleaved] парами полей. В зависимости от того,
  что вы собираетесь делать с видео, можно оставить их в таком виде,
  произвести разрушающую (с возможной потерей качества) построчную развёртку,
  либо разделить пары обратно в отдельные поля.
  </para>

  <para>
  Иначе Вы получите фильм с сильными искажениями в
  сценах с быстрыми движениями, и управление битпотоком, скорее всего, будет даже не
  в состоянии поддерживать необходимый уровень битпотока, поскольку артефакты
  чересстрочной развёртки создают огромное количество мелких деталей и поэтому
  отнимают большую часть полосы пропускания. Вы можете включить преобразование в
  построчную развёртку,
  используя <option>-vf pp=DEINT_TYPE</option>. Обычно <option>pp=lb</option>
  работает хорошо, но это уже субъективное мнение. Другие алгоритмы
  преобразования в построчную развёртку см. на man-странице и попробуйте их.
  </para>
</listitem>
<listitem><para>
  Обрежьте пустое пространство. Когда вы захватываете видео, зоны по краям, как правило,
  черны или содержат просто шум. Это опять съедает часть битпотока.
  Точнее, это не сами чёрные зоны, а контрастный переход от чёрного к более
  светлому видео, но это сейчас не важно. Прежде чем Вы начнёте захватывать,
  подстройте аргументы опции <option>crop</option>, чтобы обрезать весь мусор по
  краям. Ещё раз, не забудьте сохранить получившиеся размеры изображения
  разумными.
</para></listitem>
<listitem><para>
  Отслеживайте загрузку CPU. Она не должна пересекать 90% границу большую часть
  времени. Если у Вас большой размер буфера захвата,
  <application>MEncoder</application> переживёт
  перегрузку в течение нескольких секунд, но не более того. Лучше отключить 3D
  OpenGL, хранители экрана и другую подобную гадость.
</para></listitem>
<listitem><para>
  Не меняйте системные часы. <application>MEncoder</application> использует
  системные часы для A/V синхронизации. Если Вы переведёте системные часы
  (особенно назад), <application>MEncoder</application> запутается,
  и Вы начнёте терять кадры. Это особенно
  важный вопрос, если Вы подключены к сети и используете какие-нибудь программы
  синхронизации времени, в духе NTP. Вы должны отключить NTP во время захвата,
  если Вы действительно хотите сделать хорошую запись.
</para></listitem>
<listitem><para>
  Изменяйте значение <option>outfmt</option> только если Вы знаете, что Вы
  делаете, или Ваши карта/драйвер не поддерживают значение по умолчанию
  (пространство цветов YV12). В старых версиях <application>MPlayer</application>/
  <application>MEncoder</application> было необходимо выставлять нужное значение
  формата вывода.
  Эта проблема должна быть решена в текущих версиях и опция <option>outfmt</option>
  больше не требуется, поскольку значение по умолчанию подходит в
  большинстве случаев. Например если Вы будете захватывать в DivX, используя
  <systemitem class="library">libavcodec</systemitem> и укажете
  <option>outfmt=RGB24</option> для улучшения качества
  полученного изображения, то Вы увидите, что в действительности, изображение все
  равно будет перекодировано в YV12, поэтому все что Вы получите, это огромная
  загрузка CPU.
</para></listitem>
<listitem><para>
  Чтобы использовать пространство цветов I420 (<option>outfmt=i420</option>), Вы
  должны указать опцию <option>-vc rawi420</option> в связи с конфликтом fourcc с
  видео кодеком Intel Indeo.
</para></listitem>
<listitem><para>
  Есть несколько путей захвата аудио. Вы можете получить звук, либо используя Вашу
  звуковую карту и внешний кабель, соединяющий видео карту и линейный вход[line-in],
  либо используя встроенный АЦП на чипе bt878. В этом случае, Вы должны
  загрузить драйвер <emphasis role="bold">btaudio</emphasis>. Читайте файл
  <filename>linux/Documentation/sound/btaudio</filename> (в дереве ядра, не
  <application>MPlayer</application>'а) с некоторыми инструкциями по
  использованию этого драйвера.
</para></listitem>
<listitem><para>
  Если <application>MEncoder</application> не может открыть аудио устройство,
  убедитесь, что оно действительно доступно. Возможны некоторые трудности со
  звуковыми серверами, например arts (KDE) и esd (GNOME). Если у Вас
  полнодуплексная звуковая карта (почти все современные карты это поддерживают),
  и Вы используете KDE, попробуйте отметить галочку "full duplex" в меню настроек
  звукового сервера.
</para></listitem>
</itemizedlist>
</para>
</sect2>

<!-- ********** -->

<sect2 id="tv-examples">
<title>Примеры</title>

<informalexample><para>
Фиктивный вывод, AAlib :)
<screen>mplayer -tv driver=dummy:width=640:height=480 -vo aatv://</screen>
</para></informalexample>

<informalexample><para>
Ввод со стандартного V4L:
<screen>
mplayer -tv driver=v4l:width=640:height=480:outfmt=i420 -vc rawi420 -vo xv tv://
</screen>
</para></informalexample>

<informalexample><para>
Более изощрённый пример. Это заставляет <application>MEncoder</application> захватывать
полное PAL изображение, обрезать края и изменить развёртку картинки на построчную,
используя алгоритм линейного смешивания. Аудио сжимается до постоянного
битпотока 64 кБ/с, используя LAME кодек. Эти установки подходят для захвата фильмов.
<screen>
mencoder -tv driver=v4l:width=768:height=576 -oac mp3lame -lameopts cbr:br=64\
     -ovc lavc -lavcopts vcodec=mpeg4:vbitrate=900 \
     -vf crop=720:544:24:16,pp=lb -o <replaceable>output.avi</replaceable> tv://
</screen>
</para></informalexample>

<informalexample><para>
Здесь, изображение будет дополнительно масштабировано до 384x288 и сжато с
битпотоком 350 кБ/с в режиме высокого качества. Опция vqmax даёт волю
квантайзеру и позволяет компрессору видео действительно достичь столь
низкого битпотока, правда ценой качества. Это может быть полезно для захвата
длинных TV серий, где качество не особенно важно.
<screen>
mencoder -tv driver=v4l:width=768:height=576 \
    -ovc lavc -lavcopts vcodec=mpeg4:vbitrate=350:vhq:vqmax=31:keyint=300 \
    -oac mp3lame -lameopts cbr:br=48 -sws 1 -o <replaceable>output.avi</replaceable> \
    -vf crop=720:540:24:18,pp=lb,scale=384:288 tv://
</screen>
Также возможно указать меньшие размеры изображения в опции <option>-tv</option>
и пропустить программное масштабирование, но приведённый подход использует
максимальное доступное количество информации и чуть более устойчив к шуму.
Чипы bt8x8 из-за аппаратных ограничений могут усреднять пиксели только по
горизонтали.
</para></informalexample>
</sect2>
</sect1>


<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->


<sect1 id="tv-teletext">
<title>Телетекст</title>

<para>
На данный момент телетекст доступен только в MPlayer для v4l и v4l2 драйверов.
</para>

<sect2 id="tv-teletext-implementation-notes">
<title>Замечания реализации</title>

<para>
<application>MPlayer</application> поддерживает обычный текст, псевдографику и
навигационные ссылки.
К сожалению, цветные страницы поддерживаются пока не полностью - все страницы
отображаются оттенками серого.
Страницы с субтитрами (еще известные как Closed Captions) тоже поддерживаются.
</para>

<para>
<application>MPlayer</application> начинает кешировать все страницы телетекста
с момента начала просмотра TV, так что вам не потребуется ожидать загрузки
интересующий страницы.
</para>

<para>
Замечание: Использование телетекста с <option>-vo xv</option> приводит к появлению странных цветов.
</para>
</sect2>

<sect2 id="tv-teletext-usage">
<title>Использование телетекста</title>

<para>
Чтобы включить декодирование телетекста, вы должны указать VBI устройство, из которого
следует читать данные (обычно <filename>/dev/vbi0</filename> в Linux).
Это можно сделать, указав <option>tdevice</option> в вашем файле конфигурации:
<screen>tv=tdevice=/dev/vbi0</screen>
</para>

<para>
Вам может потребоваться указать код языка телетекста для вашей страны.
Чтобы получить список всех доступных языковых кодов, используйте
<screen>tv=tdevice=/dev/vbi0:tlang=<replaceable>-1</replaceable></screen>
Вот пример для Русского:
<screen>tv=tdevice=/dev/vbi0:tlang=<replaceable>33</replaceable></screen>
</para>
</sect2>

</sect1>


<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->


<sect1 id="radio">
<title>Радио</title>


<sect2 id="radio-input" xreflabel="Radio input">
<title>Радио вход</title>

<para>
В этой секции описывается как включить прослушивание
радио при помощи V4L совместимого Радио тюнера. Смотрите man страницу для
описания  опций и кнопок управления.
</para>


<sect3 id="radio-compilation">
<title>Компиляция</title>

<procedure>
<step><para>
  Во-первых, вам необходимо перекомпилировать <application>MPlayer</application>
  при помощи <filename>./configure</filename> с указанием опций
  <option>--enable-radio</option> и (если хотите включить поддержку записи)
  <option>--enable-radio-capture</option>.
</para></step>
<step><para>
  Убедитесь, что ваш тюнер работает с другими приложениями в Linux, например
  <application>XawTV</application>.
</para></step>
</procedure>
</sect3>

<!-- ********** -->

<sect3 id="radio-tips">
<title>Советы по использованию</title>
<para>
Полный список опций доступен на страницах руководства (man).
Вот всего несколько советов:

<itemizedlist>
<listitem><para>
  Использование <option>channels</option> опции. Пример:
  <screen>-radio channels=104.4-Sibir,103.9-Maximum</screen>
  Объяснение: при указании этой опции, будут доступны только радиостанции
  104.4 и 103.9. Кроме того, будет приятный OSD текст при переключении между каналами,
  отображающий название канала. Пробелы в названиях каналов должны быть заменены
  символом "_"
</para></listitem>
<listitem><para>
  Есть несколько путей захвата аудио. Вы можете получить звук, либо используя Вашу
  звуковую карту и внешний кабель, соединяющий видео карту и линейный вход[line-in],
  либо используя встроенный ADC на в чипе saa7134. В этом случае, Вы должны
  загрузить драйвер <systemitem>saa7134-alsa</systemitem> или
  <systemitem>saa7134-oss</systemitem>.
</para></listitem>
<listitem><para>
  <application>MEncoder</application> не может быть использован для захвата звука,
  поскольку он требует обязательного наличия видео-потока.Таким образом, вы можете
  производит захват либо используя программу <application>arecord</application>
  из проекта ALSA, либо используя
  <option>-ao pcm:file=file.wav</option>. Во втором случае вы не будете слышать ничего во
  время захвата (за исключение случая, когда вы используете line-in кабель, и слушаете
  звук непосредственно с линейного входа).
</para></listitem>
</itemizedlist>
</para>
</sect3>

<!-- ********** -->

<sect3 id="radio-examples">
<title>Примеры</title>


<informalexample><para>
Вход со стандартного V4L (используя line-in кабель, запись отключена.):
<screen>mplayer radio://104.4</screen>
</para></informalexample>

<informalexample><para>
Вход со стандартного V4L (используя line-in кабель, запись отключена. Используется интерфейс
V4Lv1):
<screen>mplayer -radio driver=v4l radio://104.4</screen>
</para></informalexample>

<informalexample><para>
прослушивание второй радиостанции из списка:
<screen>mplayer -radio channels=104.4=Sibir,103.9=Maximm  radio://2</screen>
</para></informalexample>

<informalexample>
<para>
Получение звука через шину pci с внутреннего ADC радио тюнера. В этом примере
тюнер используется как вторая звуковая карта (ALSA устройство hw:1,0).
Для карт, основанных на saa7134, либо
<systemitem>saa7134-alsa</systemitem>, либо <systemitem>saa7134-oss</systemitem>
модуль должен быть загружен.
<screen>
mplayer -rawaudio rate=32000 radio://2/capture \
    -radio adevice=hw=1.0:arate=32000:channels=104.4=Sibir,103.9=Maximm
</screen>
<note><para>
При использовании имен устройств ALSA, двоеточия необходимо заменить на
равенства, запятые - на точки.
</para></note>
</para>
</informalexample>
</sect3>
</sect2>
</sect1>
</chapter>
